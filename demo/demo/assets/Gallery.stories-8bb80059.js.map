{"version":3,"file":"Gallery.stories-8bb80059.js","sources":["../../src/UI/Gallery/GalleryItems/GalleryItem.tsx","../../node_modules/@use-gesture/core/dist/maths-b2a210f4.esm.js","../../node_modules/@use-gesture/core/dist/actions-aeda4790.esm.js","../../node_modules/@use-gesture/core/dist/use-gesture-core.esm.js","../../node_modules/@use-gesture/react/dist/use-gesture-react.esm.js","../../src/UI/Gallery/GalleryItems/useWidthResize.ts","../../src/UI/Gallery/GalleryItems/utils.ts","../../src/UI/Gallery/GalleryItems/hook.ts","../../src/UI/Gallery/GalleryItems/styles.ts","../../src/assets/arrow_right.svg","../../src/assets/arrow_left.svg","../../src/UI/Gallery/GalleryItems/index.tsx","../../src/UI/Gallery/__examples__/gallery_example.png","../../src/UI/Gallery/__examples__/styles.ts","../../src/UI/Gallery/__examples__/index.tsx","../../src/UI/Gallery/Gallery.stories.mdx"],"sourcesContent":["import type { FC, MouseEvent } from 'react'\n\nexport type ImageBackgroundType = 'cover' | 'contain'\n\nexport interface GalleryItemProps {\n  url: string\n  index: number\n  isSelected?: boolean\n  imgBackgroundType?: ImageBackgroundType\n  onClick: (e: MouseEvent<HTMLElement>) => void\n}\n\nconst GalleryItem: FC<GalleryItemProps> = ({\n  url,\n  index,\n  imgBackgroundType = 'cover',\n  isSelected = false,\n  onClick\n}) => {\n  return (\n    <div\n      className={`cf-gallery-item ${isSelected ? 'selected' : ''}`}\n      onClick={onClick}\n      data-idx={index}\n    >\n      <img src={url} alt='' className={imgBackgroundType} />\n    </div>\n  )\n}\n\nexport default GalleryItem\n","function clamp(v, min, max) {\n  return Math.max(min, Math.min(v, max));\n}\nconst V = {\n  toVector(v, fallback) {\n    if (v === undefined) v = fallback;\n    return Array.isArray(v) ? v : [v, v];\n  },\n\n  add(v1, v2) {\n    return [v1[0] + v2[0], v1[1] + v2[1]];\n  },\n\n  sub(v1, v2) {\n    return [v1[0] - v2[0], v1[1] - v2[1]];\n  },\n\n  addTo(v1, v2) {\n    v1[0] += v2[0];\n    v1[1] += v2[1];\n  },\n\n  subTo(v1, v2) {\n    v1[0] -= v2[0];\n    v1[1] -= v2[1];\n  }\n\n};\n\nfunction rubberband(distance, dimension, constant) {\n  if (dimension === 0 || Math.abs(dimension) === Infinity) return Math.pow(distance, constant * 5);\n  return distance * dimension * constant / (dimension + constant * distance);\n}\n\nfunction rubberbandIfOutOfBounds(position, min, max, constant = 0.15) {\n  if (constant === 0) return clamp(position, min, max);\n  if (position < min) return -rubberband(min - position, max - min, constant) + min;\n  if (position > max) return +rubberband(position - max, max - min, constant) + max;\n  return position;\n}\nfunction computeRubberband(bounds, [Vx, Vy], [Rx, Ry]) {\n  const [[X0, X1], [Y0, Y1]] = bounds;\n  return [rubberbandIfOutOfBounds(Vx, X0, X1, Rx), rubberbandIfOutOfBounds(Vy, Y0, Y1, Ry)];\n}\n\nexport { V, computeRubberband as c, rubberbandIfOutOfBounds as r };\n","import { V, c as computeRubberband } from './maths-b2a210f4.esm.js';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\n\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\n\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\n\nfunction hasCapture(capture = false, actionKey) {\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\n\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\n\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\n\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\n\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\n\nfunction distanceAngle(P1, P2) {\n  const dx = P2.clientX - P1.clientX;\n  const dy = P2.clientY - P1.clientY;\n  const cx = (P2.clientX + P1.clientX) / 2;\n  const cy = (P2.clientY + P1.clientY) / 2;\n  const distance = Math.hypot(dx, dy);\n  const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  const origin = [cx, cy];\n  return {\n    angle,\n    distance,\n    origin\n  };\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n    }\n\n    state.startTime = state.timeStamp = event.timeStamp;\n  }\n\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n\n      V.addTo(state._distance, _absoluteDelta);\n    }\n\n    if (this.axisIntent) this.axisIntent(event);\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n      }\n    }\n  }\n\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n\n}\n\nfunction selectAxis([dx, dy], threshold) {\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n\n  return undefined;\n}\n\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n\n  axisIntent(event) {\n    const state = this.state;\n    const config = this.config;\n\n    if (!state.axis && event) {\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n      state.axis = selectAxis(state._movement, threshold);\n    }\n\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n  }\n\n  restrictToAxis(v) {\n    if (this.config.axis || this.config.lockDirection) {\n      switch (this.state.axis) {\n        case 'x':\n          v[1] = 0;\n          break;\n\n        case 'y':\n          v[0] = 0;\n          break;\n      }\n    }\n  }\n\n}\n\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n\n  eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n\n  preventDefault(value = false) {\n    return value;\n  },\n\n  triggerAllEvents(value = false) {\n    return value;\n  },\n\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n\n      case false:\n        return [0, 0];\n\n      default:\n        return V.toVector(value);\n    }\n  },\n\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n\n        return r;\n      };\n    }\n\n    return transform || identity;\n  },\n\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n\n};\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n\n      return NaN;\n    },\n\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n\n      return NaN;\n    },\n\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nconst DEFAULT_AXIS_THRESHOLD = 0;\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n\n  axisThreshold(value = DEFAULT_AXIS_THRESHOLD) {\n    return value;\n  },\n\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n\n    if ('current' in value) {\n      return () => value.current;\n    }\n\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n\n});\n\nconst DISPLACEMENT = 10;\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (factor = 1) => [DISPLACEMENT * factor, 0],\n  ArrowLeft: (factor = 1) => [-DISPLACEMENT * factor, 0],\n  ArrowUp: (factor = 1) => [0, -DISPLACEMENT * factor],\n  ArrowDown: (factor = 1) => [0, DISPLACEMENT * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n\n  setup() {\n    const state = this.state;\n\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    const ctrlIds = this.ctrl.setEventIds(event);\n\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n\n      if (config.triggerAllEvents) {\n        this.compute(event);\n        this.emit();\n      }\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n\n    const _values = pointerValues(event);\n\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [dirx, diry] = state.direction;\n      const [vx, vy] = state.velocity;\n      const [mx, my] = state.movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n\n      if (state.elapsedTime < sdt) {\n        if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n        if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n      }\n    }\n\n    this.emit();\n  }\n\n  pointerClick(event) {\n    if (!this.state.tap && event.detail > 0) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n\n  setupScrollPrevention(event) {\n    this.state._preventScroll = false;\n    persistEvent(event);\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      this.start(event);\n      state._delta = deltaFn(factor);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n\n    if (this.config.keys) {\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n    }\n\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n\n}\n\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\n\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\n\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\n\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\n\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\n\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\n\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: isTouchScreen(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, {\n    pointer: {\n      touch = false,\n      lock = false,\n      mouse = false\n    } = {}\n  }) {\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n\n  preventScrollAxis(value, _k, {\n    preventScroll\n  }) {\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n\n  keys(value = true) {\n    return value;\n  },\n\n  threshold(value, _k, {\n    filterTaps = false,\n    tapsThreshold = 3,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n\n      case false:\n        return 0;\n\n      default:\n        return value;\n    }\n  },\n\n  axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  }\n\n});\n\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n\n      return NaN;\n    },\n\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n\n      return NaN;\n    }\n\n  });\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'pinching');\n\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n\n  axisIntent() {\n    const state = this.state;\n    const [_m0, _m1] = state._movement;\n\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n  }\n\n  restrictToAxis(v) {\n    if (this.config.lockDirection) {\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n    }\n  }\n\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    this.pinchStart(event, payload);\n  }\n\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchStart(event, payload);\n  }\n\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    this.pinchMove(event, payload);\n  }\n\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchMove(event, payload);\n  }\n\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n\n    if (!state._active) return;\n\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  wheel(event) {\n    const modifierKey = this.config.modifierKey;\n    if (modifierKey && !event[modifierKey]) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    const device = this.config.device;\n\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n    }\n\n    bindFunction('wheel', '', this.wheel.bind(this), {\n      passive: false\n    });\n  }\n\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, {\n    shared,\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n\n  modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  }\n\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    const [ox, oy] = state.overflow;\n    const [dx, dy] = state._delta;\n    const [dirx, diry] = state._direction;\n\n    if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n      state._movement[0] = state._movementBound[0];\n    }\n\n    if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n      state._movement[1] = state._movementBound[1];\n    }\n\n    this.compute(event);\n    this.emit();\n  }\n\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n","import { S as SUPPORT, C as ConfigResolverMap, _ as _objectSpread2, a as _defineProperty, t as toDomEventType, i as isTouch, b as touchIds, E as EngineMap, c as chain, p as parseProp, d as toHandlerProp } from './actions-aeda4790.esm.js';\nimport './maths-b2a210f4.esm.js';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nconst sharedConfigResolver = {\n  target(value) {\n    if (value) {\n      return () => 'current' in value ? value.current : value;\n    }\n\n    return undefined;\n  },\n\n  enabled(value = true) {\n    return value;\n  },\n\n  window(value = SUPPORT.isBrowser ? window : undefined) {\n    return value;\n  },\n\n  eventOptions({\n    passive = true,\n    capture = false\n  } = {}) {\n    return {\n      passive,\n      capture\n    };\n  },\n\n  transform(value) {\n    return value;\n  }\n\n};\n\nconst _excluded = [\"target\", \"eventOptions\", \"window\", \"enabled\", \"transform\"];\nfunction resolveWith(config = {}, resolvers) {\n  const result = {};\n\n  for (const [key, resolver] of Object.entries(resolvers)) {\n    switch (typeof resolver) {\n      case 'function':\n        if (process.env.NODE_ENV === 'development') {\n          const r = resolver.call(result, config[key], key, config);\n          if (!Number.isNaN(r)) result[key] = r;\n        } else {\n          result[key] = resolver.call(result, config[key], key, config);\n        }\n\n        break;\n\n      case 'object':\n        result[key] = resolveWith(config[key], resolver);\n        break;\n\n      case 'boolean':\n        if (resolver) result[key] = config[key];\n        break;\n    }\n  }\n\n  return result;\n}\nfunction parse(newConfig, gestureKey, _config = {}) {\n  const _ref = newConfig,\n        {\n    target,\n    eventOptions,\n    window,\n    enabled,\n    transform\n  } = _ref,\n        rest = _objectWithoutProperties(_ref, _excluded);\n\n  _config.shared = resolveWith({\n    target,\n    eventOptions,\n    window,\n    enabled,\n    transform\n  }, sharedConfigResolver);\n\n  if (gestureKey) {\n    const resolver = ConfigResolverMap.get(gestureKey);\n    _config[gestureKey] = resolveWith(_objectSpread2({\n      shared: _config.shared\n    }, rest), resolver);\n  } else {\n    for (const key in rest) {\n      const resolver = ConfigResolverMap.get(key);\n\n      if (resolver) {\n        _config[key] = resolveWith(_objectSpread2({\n          shared: _config.shared\n        }, rest[key]), resolver);\n      } else if (process.env.NODE_ENV === 'development') {\n        if (!['drag', 'pinch', 'scroll', 'wheel', 'move', 'hover'].includes(key)) {\n          if (key === 'domTarget') {\n            throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n          }\n\n          console.warn(`[@use-gesture]: Unknown config key \\`${key}\\` was used. Please read the documentation for further information.`);\n        }\n      }\n    }\n  }\n\n  return _config;\n}\n\nclass EventStore {\n  constructor(ctrl, gestureKey) {\n    _defineProperty(this, \"_listeners\", new Set());\n\n    this._ctrl = ctrl;\n    this._gestureKey = gestureKey;\n  }\n\n  add(element, device, action, handler, options) {\n    const listeners = this._listeners;\n    const type = toDomEventType(device, action);\n\n    const _options = this._gestureKey ? this._ctrl.config[this._gestureKey].eventOptions : {};\n\n    const eventOptions = _objectSpread2(_objectSpread2({}, _options), options);\n\n    element.addEventListener(type, handler, eventOptions);\n\n    const remove = () => {\n      element.removeEventListener(type, handler, eventOptions);\n      listeners.delete(remove);\n    };\n\n    listeners.add(remove);\n    return remove;\n  }\n\n  clean() {\n    this._listeners.forEach(remove => remove());\n\n    this._listeners.clear();\n  }\n\n}\n\nclass TimeoutStore {\n  constructor() {\n    _defineProperty(this, \"_timeouts\", new Map());\n  }\n\n  add(key, callback, ms = 140, ...args) {\n    this.remove(key);\n\n    this._timeouts.set(key, window.setTimeout(callback, ms, ...args));\n  }\n\n  remove(key) {\n    const timeout = this._timeouts.get(key);\n\n    if (timeout) window.clearTimeout(timeout);\n  }\n\n  clean() {\n    this._timeouts.forEach(timeout => void window.clearTimeout(timeout));\n\n    this._timeouts.clear();\n  }\n\n}\n\nclass Controller {\n  constructor(handlers) {\n    _defineProperty(this, \"gestures\", new Set());\n\n    _defineProperty(this, \"_targetEventStore\", new EventStore(this));\n\n    _defineProperty(this, \"gestureEventStores\", {});\n\n    _defineProperty(this, \"gestureTimeoutStores\", {});\n\n    _defineProperty(this, \"handlers\", {});\n\n    _defineProperty(this, \"config\", {});\n\n    _defineProperty(this, \"pointerIds\", new Set());\n\n    _defineProperty(this, \"touchIds\", new Set());\n\n    _defineProperty(this, \"state\", {\n      shared: {\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }\n    });\n\n    resolveGestures(this, handlers);\n  }\n\n  setEventIds(event) {\n    if (isTouch(event)) {\n      this.touchIds = new Set(touchIds(event));\n      return this.touchIds;\n    } else if ('pointerId' in event) {\n      if (event.type === 'pointerup' || event.type === 'pointercancel') this.pointerIds.delete(event.pointerId);else if (event.type === 'pointerdown') this.pointerIds.add(event.pointerId);\n      return this.pointerIds;\n    }\n  }\n\n  applyHandlers(handlers, nativeHandlers) {\n    this.handlers = handlers;\n    this.nativeHandlers = nativeHandlers;\n  }\n\n  applyConfig(config, gestureKey) {\n    this.config = parse(config, gestureKey, this.config);\n  }\n\n  clean() {\n    this._targetEventStore.clean();\n\n    for (const key of this.gestures) {\n      this.gestureEventStores[key].clean();\n      this.gestureTimeoutStores[key].clean();\n    }\n  }\n\n  effect() {\n    if (this.config.shared.target) this.bind();\n    return () => this._targetEventStore.clean();\n  }\n\n  bind(...args) {\n    const sharedConfig = this.config.shared;\n    const props = {};\n    let target;\n\n    if (sharedConfig.target) {\n      target = sharedConfig.target();\n      if (!target) return;\n    }\n\n    if (sharedConfig.enabled) {\n      for (const gestureKey of this.gestures) {\n        const gestureConfig = this.config[gestureKey];\n        const bindFunction = bindToProps(props, gestureConfig.eventOptions, !!target);\n\n        if (gestureConfig.enabled) {\n          const Engine = EngineMap.get(gestureKey);\n          new Engine(this, args, gestureKey).bind(bindFunction);\n        }\n      }\n\n      const nativeBindFunction = bindToProps(props, sharedConfig.eventOptions, !!target);\n\n      for (const eventKey in this.nativeHandlers) {\n        nativeBindFunction(eventKey, '', event => this.nativeHandlers[eventKey](_objectSpread2(_objectSpread2({}, this.state.shared), {}, {\n          event,\n          args\n        })), undefined, true);\n      }\n    }\n\n    for (const handlerProp in props) {\n      props[handlerProp] = chain(...props[handlerProp]);\n    }\n\n    if (!target) return props;\n\n    for (const handlerProp in props) {\n      const {\n        device,\n        capture,\n        passive\n      } = parseProp(handlerProp);\n\n      this._targetEventStore.add(target, device, '', props[handlerProp], {\n        capture,\n        passive\n      });\n    }\n  }\n\n}\n\nfunction setupGesture(ctrl, gestureKey) {\n  ctrl.gestures.add(gestureKey);\n  ctrl.gestureEventStores[gestureKey] = new EventStore(ctrl, gestureKey);\n  ctrl.gestureTimeoutStores[gestureKey] = new TimeoutStore();\n}\n\nfunction resolveGestures(ctrl, internalHandlers) {\n  if (internalHandlers.drag) setupGesture(ctrl, 'drag');\n  if (internalHandlers.wheel) setupGesture(ctrl, 'wheel');\n  if (internalHandlers.scroll) setupGesture(ctrl, 'scroll');\n  if (internalHandlers.move) setupGesture(ctrl, 'move');\n  if (internalHandlers.pinch) setupGesture(ctrl, 'pinch');\n  if (internalHandlers.hover) setupGesture(ctrl, 'hover');\n}\n\nconst bindToProps = (props, eventOptions, withPassiveOption) => (device, action, handler, options = {}, isNative = false) => {\n  var _options$capture, _options$passive;\n\n  const capture = (_options$capture = options.capture) !== null && _options$capture !== void 0 ? _options$capture : eventOptions.capture;\n  const passive = (_options$passive = options.passive) !== null && _options$passive !== void 0 ? _options$passive : eventOptions.passive;\n  let handlerProp = isNative ? device : toHandlerProp(device, action, capture);\n  if (withPassiveOption && passive) handlerProp += 'Passive';\n  props[handlerProp] = props[handlerProp] || [];\n  props[handlerProp].push(handler);\n};\n\nconst RE_NOT_NATIVE = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;\n\nfunction sortHandlers(_handlers) {\n  const native = {};\n  const handlers = {};\n  const actions = new Set();\n\n  for (let key in _handlers) {\n    if (RE_NOT_NATIVE.test(key)) {\n      actions.add(RegExp.lastMatch);\n      handlers[key] = _handlers[key];\n    } else {\n      native[key] = _handlers[key];\n    }\n  }\n\n  return [handlers, native, actions];\n}\n\nfunction registerGesture(actions, handlers, handlerKey, key, internalHandlers, config) {\n  if (!actions.has(handlerKey)) return;\n\n  if (!EngineMap.has(key)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(`[@use-gesture]: You've created a custom handler that that uses the \\`${key}\\` gesture but isn't properly configured.\\n\\nPlease add \\`${key}Action\\` when creating your handler.`);\n    }\n\n    return;\n  }\n\n  const startKey = handlerKey + 'Start';\n  const endKey = handlerKey + 'End';\n\n  const fn = state => {\n    let memo = undefined;\n    if (state.first && startKey in handlers) handlers[startKey](state);\n    if (handlerKey in handlers) memo = handlers[handlerKey](state);\n    if (state.last && endKey in handlers) handlers[endKey](state);\n    return memo;\n  };\n\n  internalHandlers[key] = fn;\n  config[key] = config[key] || {};\n}\n\nfunction parseMergedHandlers(mergedHandlers, mergedConfig) {\n  const [handlers, nativeHandlers, actions] = sortHandlers(mergedHandlers);\n  const internalHandlers = {};\n  registerGesture(actions, handlers, 'onDrag', 'drag', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onWheel', 'wheel', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onScroll', 'scroll', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onPinch', 'pinch', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onMove', 'move', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onHover', 'hover', internalHandlers, mergedConfig);\n  return {\n    handlers: internalHandlers,\n    config: mergedConfig,\n    nativeHandlers\n  };\n}\n\nexport { Controller, parseMergedHandlers };\n","import { registerAction, dragAction, pinchAction, wheelAction, scrollAction, moveAction, hoverAction } from '@use-gesture/core/actions';\nexport * from '@use-gesture/core/actions';\nimport React from 'react';\nimport { Controller, parseMergedHandlers } from '@use-gesture/core';\nexport * from '@use-gesture/core/utils';\nexport * from '@use-gesture/core/types';\n\nfunction useRecognizers(handlers, config = {}, gestureKey, nativeHandlers) {\n  const ctrl = React.useMemo(() => new Controller(handlers), []);\n  ctrl.applyHandlers(handlers, nativeHandlers);\n  ctrl.applyConfig(config, gestureKey);\n  React.useEffect(ctrl.effect.bind(ctrl));\n  React.useEffect(() => {\n    return ctrl.clean.bind(ctrl);\n  }, []);\n\n  if (config.target === undefined) {\n    return ctrl.bind.bind(ctrl);\n  }\n\n  return undefined;\n}\n\nfunction useDrag(handler, config) {\n  registerAction(dragAction);\n  return useRecognizers({\n    drag: handler\n  }, config || {}, 'drag');\n}\n\nfunction usePinch(handler, config) {\n  registerAction(pinchAction);\n  return useRecognizers({\n    pinch: handler\n  }, config || {}, 'pinch');\n}\n\nfunction useWheel(handler, config) {\n  registerAction(wheelAction);\n  return useRecognizers({\n    wheel: handler\n  }, config || {}, 'wheel');\n}\n\nfunction useScroll(handler, config) {\n  registerAction(scrollAction);\n  return useRecognizers({\n    scroll: handler\n  }, config || {}, 'scroll');\n}\n\nfunction useMove(handler, config) {\n  registerAction(moveAction);\n  return useRecognizers({\n    move: handler\n  }, config || {}, 'move');\n}\n\nfunction useHover(handler, config) {\n  registerAction(hoverAction);\n  return useRecognizers({\n    hover: handler\n  }, config || {}, 'hover');\n}\n\nfunction createUseGesture(actions) {\n  actions.forEach(registerAction);\n  return function useGesture(_handlers, _config) {\n    const {\n      handlers,\n      nativeHandlers,\n      config\n    } = parseMergedHandlers(_handlers, _config || {});\n    return useRecognizers(handlers, config, undefined, nativeHandlers);\n  };\n}\n\nfunction useGesture(handlers, config) {\n  const hook = createUseGesture([dragAction, pinchAction, scrollAction, wheelAction, moveAction, hoverAction]);\n  return hook(handlers, config || {});\n}\n\nexport { createUseGesture, useDrag, useGesture, useHover, useMove, usePinch, useScroll, useWheel };\n","import { RefObject, useEffect, useRef, useState } from 'react'\nimport pDebounce from 'p-debounce'\n\nexport interface UseWidthResizeReturn {\n  elRef: RefObject<HTMLDivElement>\n  width: number\n}\n\nexport const RESIZE_DEBOUNCE_DELAY = 1000\n\nexport interface UseWidthResizeProps {\n  onResize?: (width: number) => void\n}\n\n/**\n *\n * @param onResize callback to be called on resize\n * @returns {\n *  elRef - reference to element for which width is being tracked;\n *  widthRef - reference to current width of the element\n * }\n *\n */\nconst useWidthResize = ({\n  onResize\n}: UseWidthResizeProps = {}): UseWidthResizeReturn => {\n  const elRef = useRef<HTMLDivElement>(null)\n  const widthRef = useRef<number>(0)\n  const onResizeRef = useRef(onResize)\n  const [width, setWidth] = useState(0)\n\n  const setWidthDebauncedRef = useRef(pDebounce(setWidth, RESIZE_DEBOUNCE_DELAY))\n\n  useEffect(() => {\n    onResizeRef.current = onResize\n  }, [onResize])\n\n  useEffect(() => {\n    const resizeObserver = new ResizeObserver(([{ contentRect: { width } }]) => {\n      void setWidthDebauncedRef.current(width)\n\n      /**\n       * we do not trigger anything for initial resize\n       */\n      if (widthRef.current > 0) {\n        onResizeRef.current?.(width)\n      }\n\n      widthRef.current = width\n    })\n\n    if (elRef.current != null) {\n      resizeObserver.observe(elRef.current)\n    }\n\n    return () => {\n      if (elRef.current != null) {\n        resizeObserver.unobserve(elRef.current)\n      }\n    }\n  }, [])\n\n  return {\n    elRef,\n    width\n  }\n}\n\nexport default useWidthResize\n","export type AnimateCallback = (callback: FrameRequestCallback) => number\n\nexport const getItemsGap = (itemWidth: string): number => {\n  return itemWidth === '100%'\n    ? 0\n    : 16\n}\n\nexport const calcItemWidth = (itemWidth: string, width: number): number => {\n  const isPercentValue = itemWidth.includes('%')\n  const itemWidthNum = Number(itemWidth.replace(/\\D/g, ''))\n  const itemsGap = getItemsGap(itemWidth)\n\n  return isPercentValue\n    ? Math.min(width, Math.ceil(width * itemWidthNum / 100) + itemsGap)\n    : itemWidthNum + itemsGap\n}\n\nexport const translateX = (num: number): string => `translateX(${num}px)`\n\nexport const bouncedAnimate = (\n  animate: AnimateCallback,\n  el: HTMLDivElement,\n  val: number,\n  bounceOffset: number,\n  bounceDir: 1 | -1,\n  isBounced: boolean,\n  bounceDelay: number\n): void => {\n  animate(() => {\n    if (isBounced) {\n      el.style.transform = translateX(bounceDir * (val - bounceOffset))\n\n      const t = setTimeout(() => {\n        animate(() => { el.style.transform = translateX(val) })\n        clearTimeout(t)\n      }, bounceDelay)\n    } else {\n      el.style.transform = translateX(val)\n    }\n  })\n}\n","import { useCallback, useEffect, useRef, useState, type MouseEvent, RefObject } from 'react'\nimport type { ReactDOMAttributes } from '@use-gesture/react/dist/declarations/src/types'\nimport { useDrag } from '@use-gesture/react'\n\nimport useWidthResize from './useWidthResize'\nimport { bouncedAnimate, calcItemWidth, translateX } from './utils'\nimport { GLOBAL_STYLE_CONSTANTS } from '../../GlobalStyles/constants'\n\ntype Direction = 1 | 0 | -1 // left | neutral | right\n\ntype PositionChangeHandler = (index: number) => void\n\nexport interface UseGalleryItemsProps {\n  itemsLength: number\n  autoSwipeEnabled?: boolean\n  isActive?: boolean\n  selected?: number\n  itemWidth?: string\n  swipeThreshold?: number\n  isKeyboardFriendly?: boolean\n  stopPropagation?: boolean\n  bounceDelay?: number\n  showDots?: boolean\n  onSelect?: PositionChangeHandler\n  onClick?: (selected?: number, e?: MouseEvent<HTMLElement>) => void\n}\n\nexport interface UseGalleryItemsReturn {\n  elRef: RefObject<HTMLDivElement>\n  dotsElRef: RefObject<HTMLDivElement>\n  isLeftArrowDisable: boolean\n  isRightArrowDisable: boolean\n  isGalleryInitted: boolean\n  onClick: (e: MouseEvent<HTMLElement>) => void\n  onMoveLeft: () => void\n  onMoveRight: () => void\n  bind: (...args: any[]) => ReactDOMAttributes\n}\n\n// px\nexport const ITEM_WIDTH = '100px'\nexport const SWIPE_THRESHOLD = 6\nexport const MAX_BOUNCE_OFFSET = 100\n\n// ms\nexport const BOUNCE_DELAY = 150\n\n// get css vars as a argument of components to have access to global styles\nconst DOT_WIDTH = GLOBAL_STYLE_CONSTANTS.galeryDotSize + GLOBAL_STYLE_CONSTANTS.galeryDotSize\n\nconst useGalleryItems = ({\n  itemsLength,\n  onSelect,\n  onClick: handleClick,\n  selected = 0,\n  isActive = false,\n  autoSwipeEnabled = true,\n  isKeyboardFriendly = false,\n  stopPropagation = false,\n  itemWidth = ITEM_WIDTH,\n  swipeThreshold = SWIPE_THRESHOLD,\n  bounceDelay = BOUNCE_DELAY,\n  showDots = false\n}: UseGalleryItemsProps): UseGalleryItemsReturn => {\n  const { elRef, width } = useWidthResize()\n\n  const prevPos = useRef(selected)\n  const offsetRef = useRef(0)\n  const hasDraggedRef = useRef(false)\n  const dotsElRef = useRef<HTMLDivElement>(null)\n  const isKeyboardListenerAttachedRef = useRef(false)\n\n  const [isGalleryInitted, setIsGalleryInitted] = useState(false)\n\n  // ========================================== //\n  //                   HANDLERS                 //\n  // ========================================== //\n\n  const onMove = useCallback((dir: Direction, selectOnDrag: boolean, pos?: number): void => {\n    const el = elRef.current\n\n    if (dir === 0 || el == null) {\n      return\n    }\n\n    const animate = window.requestAnimationFrame\n\n    const itemWidthVal = calcItemWidth(itemWidth, width)\n    const bounceOffset = Math.min(MAX_BOUNCE_OFFSET, itemWidthVal / 2)\n\n    /**\n     * we scroll only by one item from the previous position\n     */\n\n    const maxItemsOnScreen = Math.min(itemsLength, Math.floor(width / itemWidthVal))\n    const rightLimit = -1 * (itemsLength - maxItemsOnScreen) * itemWidthVal\n\n    const step = pos == null ? 1 : Math.abs(pos - prevPos.current)\n    offsetRef.current += dir * itemWidthVal * step\n\n    /**\n     * we need to invert direction for 'selected index'\n     */\n    const nextIdxRaw = prevPos.current + dir * -1 * step\n    const nextIdx = Math.min(itemsLength - 1, Math.max(nextIdxRaw, 0))\n\n    if (selectOnDrag) {\n      onSelect?.(nextIdx)\n    }\n\n    /**\n     * we do not show dots animation when we reached the end on the previous step\n     */\n    if (showDots && nextIdxRaw > -1 && nextIdxRaw < itemsLength) {\n      animate(() => {\n        if (dotsElRef.current != null) {\n          dotsElRef.current.style.left = `${nextIdx * -1 * DOT_WIDTH}px`\n        }\n      })\n    }\n\n    if (offsetRef.current > 0) {\n      offsetRef.current = 0\n      const isBounced = hasDraggedRef.current && nextIdxRaw < 0\n\n      bouncedAnimate(animate, el, offsetRef.current, bounceOffset, -1, isBounced, bounceDelay)\n    } else if (offsetRef.current < rightLimit) {\n      offsetRef.current = rightLimit\n      const isBounced = hasDraggedRef.current && nextIdxRaw > itemsLength - 1\n\n      bouncedAnimate(animate, el, offsetRef.current, bounceOffset, 1, isBounced, bounceDelay)\n    } else {\n      animate(() => {\n        el.style.transform = translateX(offsetRef.current)\n      })\n    }\n  }, [\n    width,\n    itemWidth,\n    bounceDelay,\n    itemsLength,\n    showDots,\n    onSelect\n  ])\n\n  const onClick = useCallback((e: MouseEvent<HTMLElement>) => {\n    /**\n     * we need this to avoid conflicts between different Galleries on the screen.\n     * Conflicts relate to handling open/close on outside click event for example.\n     */\n    if (stopPropagation) {\n      e.stopPropagation()\n    }\n\n    const idx = Number(e.currentTarget.getAttribute('data-idx'))\n\n    if (!isNaN(idx)) {\n      onSelect?.(idx)\n    }\n\n    handleClick?.(idx, e)\n  }, [onSelect, handleClick, stopPropagation])\n\n  const onMoveLeft = useCallback((e?: MouseEvent<HTMLElement>) => {\n    e?.stopPropagation()\n\n    hasDraggedRef.current = true\n    onMove(1, true)\n  }, [onMove])\n\n  const onMoveRight = useCallback((e?: MouseEvent<HTMLElement>) => {\n    e?.stopPropagation()\n\n    hasDraggedRef.current = true\n    onMove(-1, true)\n  }, [onMove])\n\n  const handleKeyDown = useCallback((e: any): void => {\n    if (e.key === 'ArrowLeft') {\n      onMoveLeft()\n    } else if (e.key === 'ArrowRight') {\n      onMoveRight()\n    }\n  }, [onMoveLeft, onMoveRight])\n\n  // ========================================== //\n  //                   EFFECTS                  //\n  // ========================================== //\n\n  useEffect(() => {\n    if (!isActive || !isKeyboardFriendly || isKeyboardListenerAttachedRef.current) {\n      return\n    }\n    document.addEventListener('keydown', handleKeyDown)\n    isKeyboardListenerAttachedRef.current = true\n\n    return () => {\n      document.removeEventListener('keydown', handleKeyDown)\n      isKeyboardListenerAttachedRef.current = false\n    }\n  }, [handleKeyDown, isKeyboardFriendly, isActive])\n\n  const bind = useDrag((dragProps) => {\n    const { active, movement: [mx], direction: [xDir], cancel } = dragProps\n\n    if (active && Math.abs(mx) > swipeThreshold) {\n      hasDraggedRef.current = true\n      onMove(xDir as Direction, true)\n      cancel()\n    }\n  }, { filterTaps: true })\n\n  /**\n   * move to selected after resize hook\n   */\n  useEffect(() => {\n    const el = elRef.current\n\n    if (el == null || width === 0) {\n      return\n    }\n\n    const itemWidthVal = calcItemWidth(itemWidth, width)\n    const maxItemsOnScreen = Math.min(itemsLength, Math.floor(width / itemWidthVal))\n    const rightLimit = -1 * (itemsLength - maxItemsOnScreen) * itemWidthVal\n\n    offsetRef.current = Math.max(rightLimit, -1 * itemWidthVal * prevPos.current)\n\n    window.requestAnimationFrame(() => {\n      el.style.transform = translateX(offsetRef.current)\n\n      /**\n       * intentionally done here and not in onMove because initial transition occurs without move\n      */\n      const t = setTimeout(() => {\n        setIsGalleryInitted(true)\n        clearTimeout(t)\n      }, 0)\n    })\n  }, [width, itemsLength, itemWidth])\n\n  /**\n   * move to selected hook\n   */\n  useEffect(() => {\n    if (prevPos.current === selected || !autoSwipeEnabled) {\n      return\n    }\n\n    if (hasDraggedRef.current) {\n      hasDraggedRef.current = false\n      return\n    }\n\n    const dir = prevPos.current > selected ? 1 : -1\n    onMove(dir, false, selected)\n  }, [selected, autoSwipeEnabled, onMove])\n\n  /**\n   * prevPos.current must be updated only after it was used by all other hooks.\n   * This way we preserve its correct logic. That is why this hook goes last.\n   */\n  useEffect(() => {\n    if (autoSwipeEnabled) {\n      prevPos.current = selected\n    }\n  }, [selected, autoSwipeEnabled])\n\n  // ========================================== //\n\n  return {\n    elRef,\n    dotsElRef,\n    isLeftArrowDisable: selected === 0,\n    isRightArrowDisable: selected === itemsLength - 1,\n    isGalleryInitted,\n    onMoveLeft,\n    onMoveRight,\n    onClick,\n    bind\n  }\n}\n\nexport default useGalleryItems\n","import { css } from '@emotion/css'\n\nexport const DEFAULT_TRANSITION_VELOCITY = 300\n\ninterface StyleProps {\n  itemWidth: string\n  transitionVelocity?: number\n  styleSelected?: boolean\n}\n\nconst createStyleClass = ({\n  itemWidth,\n  transitionVelocity = DEFAULT_TRANSITION_VELOCITY,\n  styleSelected = true\n}: StyleProps): string => {\n  return css(`\n    height: 100%;\n    position: relative;\n\n    .cf-gallery-arrow {\n      cursor: pointer;\n      position: absolute;\n      width: 32px;\n      height: 32px;\n      top: 50%;\n      transform: translate(0, -50%);\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      z-index: 1;\n      border-radius: 50%;\n      background: #fff;\n      border: 0;\n\n      &:hover {\n        background: rgba(255,255,255,0.8);\n      }\n\n      &.right {\n        right: 0px;\n      }\n\n      &.left {\n        left: 0px;\n      }\n\n      &.disabled {\n        cursor: not-allowed;\n        background: rgba(255,255,255,0.8);\n      }\n    }\n\n    .cf-gallery-container {\n      height: 100%;\n      overflow-x: hidden;\n      touch-action: pan-x;\n      position: relative;\n\n      .cf-gallery-dots-container {\n        position: absolute;\n        bottom: 20px;\n        left: 50%;\n        transform: translate(-50%, 0);\n        width: calc(5 * var(--galeryDotSize) + 4 * var(--galeryDotSize));\n        height: var(--galeryDotSize);\n        z-index: 1;\n        overflow: hidden;\n\n        .cf-gallery-dots-list {\n          position: absolute;\n          display: flex;\n          flex-wrap: nowrap;\n          left: 0px;\n          transform: translateX(0);\n          transition: left .3s;\n          \n          .cf-gallery-dot {\n            width: var(--galeryDotSize);\n            min-width: var(--galeryDotSize);\n            height: var(--galeryDotSize);\n            border-radius: 50%;\n            background: rgba(255, 255, 255, 0.5);\n\n            &.active {\n              background: #fff;\n            }\n\n            &:not(:last-child) {\n              margin-right: var(--galeryDotGap);\n            }\n          }\n        }\n      }\n\n      .cf-gallery-items-wrapper {\n        display: flex;\n        height: 100%;\n        will-change: transform;\n        user-select: none;\n        opacity: 1;\n        transition: transform ${transitionVelocity}ms ease-in;\n      }\n\n      .cf-gallery-item {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        max-width: ${itemWidth};\n        min-width: ${itemWidth};\n        position: relative;\n        z-index: 10;\n        color: #fff;\n\n        &:not(:last-child) {\n          padding-right: ${itemWidth === '100%' ? '0px' : 'var(--galleryThumbnailGap)'};\n        }\n\n        img {\n          ${\n            styleSelected\n              ? `& {\n                  border: 2px solid transparent;\n                }`\n              : ''\n          }\n\n          border-radius: 4px;\n          margin: 0 auto;\n          box-sizing: border-box;\n\n          &.cover {\n            width: 100%;\n            max-height: 100%;\n            object-fit: cover;\n          }\n\n          &.contain {\n            object-fit: contain;\n            max-width: 100%;\n            max-height: 100%;\n            width: auto;\n            height: auto;\n          }\n        },\n\n        ${\n          styleSelected\n            ? `&.selected img {\n                border: 2px solid rgba(201, 155, 134, 0.72);\n              }`\n            : ''\n        }\n      }\n    }\n\n    &.cf-gallery-items-not-initted .cf-gallery-container .cf-gallery-items-wrapper {\n      opacity: 0;\n      transition: transform 0ms, opacity 0ms;\n    }\n`)\n}\n\nexport default createStyleClass\n","export default \"__VITE_ASSET__9f78f55b__\"","export default \"__VITE_ASSET__8ef31c96__\"","import { useMemo, type FC, ReactNode } from 'react'\nimport GalleryItem, { ImageBackgroundType } from './GalleryItem'\nimport useGalleryItems, { UseGalleryItemsProps, ITEM_WIDTH } from './hook'\nimport createStyleClass from './styles'\n\nimport { cnx } from '@/utils/ui'\nimport arrowRight from '@/assets/arrow_right.svg'\nimport arrowLeft from '@/assets/arrow_left.svg'\n\n/**\n * sets which dot is always active counting from the start of visible dots\n */\nexport const ACTIVE_DOT_OFFSET = 2\n\n/**\n * makes extra buffer for dots section to support infinite swiping animation\n */\nexport const VISIBLE_DOTS = 5\n\nexport type GalleryItemsProps = Omit<UseGalleryItemsProps, 'itemsLength'> & {\n  imageUrls: string[]\n  className?: string\n  showArrows?: boolean\n  styleSelected?: boolean\n  imgBackgroundType?: ImageBackgroundType\n  transitionVelocity?: number\n}\n\nconst GalleryItems: FC<GalleryItemsProps> = (props) => {\n  const {\n    imageUrls,\n    selected,\n    className,\n    itemWidth = ITEM_WIDTH,\n    imgBackgroundType = 'cover',\n    showDots = false,\n    showArrows = false,\n    styleSelected = true,\n    transitionVelocity\n  } = props\n  const itemsLength = imageUrls.length\n\n  const rootCls = useMemo(() => createStyleClass({ itemWidth, styleSelected, transitionVelocity }), [itemWidth])\n\n  /**\n   * 1 dot is always visible as we do not allow to pass itemsLength limit\n   */\n  const dots = useMemo(() => new Array(itemsLength + VISIBLE_DOTS - 1).fill(true), [itemsLength])\n\n  const {\n    dotsElRef,\n    elRef,\n    isGalleryInitted,\n    onClick,\n    onMoveLeft,\n    onMoveRight,\n    bind\n  } = useGalleryItems({ ...props, itemsLength })\n\n  return (\n    <div className={cnx(rootCls, className, !isGalleryInitted && 'cf-gallery-items-not-initted')}>\n      {(showArrows && isGalleryInitted) && (\n        <>\n          <button\n            onClick={onMoveLeft}\n            className='cf-gallery-arrow left'\n          >\n            <img src={arrowLeft} alt='left' />\n          </button>\n\n          <button\n            onClick={onMoveRight}\n            className='cf-gallery-arrow right'\n          >\n            <img src={arrowRight} alt='right' />\n          </button>\n        </>\n      )}\n\n      <div className='cf-gallery-container' {...bind()}>\n        {\n          showDots && (\n            <div className='cf-gallery-dots-container'>\n              <div className='cf-gallery-dots-list' ref={dotsElRef}>\n                {\n                  dots.map((_, i): ReactNode => {\n                    const isActive = (selected ?? 0) + ACTIVE_DOT_OFFSET === i\n\n                    return (\n                      <div\n                        key={i}\n                        className={`cf-gallery-dot ${isActive ? 'active' : ''}`}\n                      />\n                    )\n                  })\n                }\n              </div>\n            </div>\n          )\n        }\n        <div className='cf-gallery-items-wrapper' ref={elRef}>\n          {\n            imageUrls.map((v, i) => (\n              <GalleryItem\n                key={v}\n                url={v}\n                index={i}\n                isSelected={selected === i}\n                imgBackgroundType={imgBackgroundType}\n                onClick={onClick}\n              />\n            ))\n          }\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default GalleryItems\n","export default \"__VITE_ASSET__c92818e6__\"","import { css } from '@emotion/css'\n\nexport default css(`\n  width: 400px;\n  margin: 0 auto;\n  \n  .cf-gallery-main {\n    margin-bottom: 20px;\n  }\n  \n  .cf-sub-gallery {\n    .cf-gallery-container {\n      max-width: calc(100% - 80px);\n      margin: 0 auto;\n    }\n  }\n`)\n","import { useState } from 'react'\n\nimport GalleryItems from '../GalleryItems'\nimport { GlobalStyles } from '../../GlobalStyles'\n\nimport example_photo from './gallery_example.png'\nimport CLASS_NAME from './styles'\n\nconst imageUrls = [example_photo, example_photo, example_photo, example_photo, example_photo, example_photo]\n\nexport const GalleryExample = () => {\n  const [selectedIdx, setSelectedIdx] = useState(0)\n  const [isOpen, setIsOpen] = useState(false)\n\n  return (\n    <div className={CLASS_NAME}>\n      <GlobalStyles />\n\n      <input\n        type='number'\n        max={imageUrls.length}\n        onChange={(e) => setSelectedIdx(Number(e.target.value))}\n        value={selectedIdx}\n      />\n      <button onClick={() => setIsOpen(v => !v)} style={{ marginBottom: '40px' }}>Toggle Gallery</button>\n\n      {\n        isOpen && (\n          <>\n            <GalleryItems\n              imageUrls={imageUrls}\n              selected={selectedIdx}\n              onSelect={setSelectedIdx}\n              itemWidth=\"100%\"\n              className='cf-gallery-main'\n            />\n\n            <GalleryItems\n              imageUrls={imageUrls}\n              selected={selectedIdx}\n              onSelect={setSelectedIdx}\n              className='cf-sub-gallery'\n              isActive={true}\n              showArrows\n            />\n          </>\n        )\n      }\n    </div>\n  )\n}\n","import { Meta, Story } from '@storybook/addon-docs'\n\nimport {\n  GalleryExample\n} from './__examples__/'\n\n<Meta title='Gallery' component={GalleryExample} />\n\n# Modal window\n\nA general modal window. \n\n<Story name='Gallery example'>\n  {GalleryExample}\n</Story>\n\n"],"names":["GalleryItem","__name","url","index","isSelected","onClick","_jsx","imgBackgroundType","clamp","v","min","max","V","fallback","v1","v2","rubberband","distance","dimension","constant","rubberbandIfOutOfBounds","position","computeRubberband","bounds","Vx","Vy","Rx","Ry","X0","X1","Y0","Y1","_defineProperty","obj","key","value","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","target","i","source","EVENT_TYPE_MAP","capitalize","string","actionsWithoutCaptureSupported","hasCapture","capture","actionKey","toHandlerProp","device","action","deviceProps","pointerCaptureEvents","parseProp","prop","eventKey","passive","captureKey","toDomEventType","isTouch","event","getPointerType","getCurrentTargetTouchList","e","_event$currentTarget","_event$currentTarget$","getTouchList","getValueEvent","touchIds","touch","pointerId","valueEvent","pointerValues","getEventDetails","payload","shiftKey","altKey","metaKey","ctrlKey","call","args","noop","chain","fns","result","fn","assignDefault","BEFORE_LAST_KINEMATICS_DELAY","Engine","ctrl","state","shared","ingKey","config","values","dt","_absoluteDelta","_m0","_m1","t0","t1","_step","movement","v0","previousOffset","gestureIsActive","ox","oy","x0","x1","y0","y1","absoluteDelta","memo","selectAxis","dx","dy","threshold","absDx","absDy","CoordinatesEngine","identity","DEFAULT_RUBBERBAND","commonConfigResolver","_k","transform","DEFAULT_AXIS_THRESHOLD","coordinatesConfigResolver","_v","axis","left","right","top","bottom","DISPLACEMENT","KEYS_DELTA_MAP","factor","DragEngine","boundRect","targetRect","_bounds","ctrlIds","id","_values","dirx","diry","vx","vy","mx","my","svx","svy","sx","sy","sdt","persistEvent","remove","deltaFn","bindFunction","isBrowser","supportsTouchEvents","isTouchScreen","supportsPointerEvents","supportsPointerLock","supportsGestureEvents","SUPPORT","DEFAULT_PREVENT_SCROLL_DELAY","DEFAULT_DRAG_DELAY","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","DEFAULT_DRAG_AXIS_THRESHOLD","dragConfigResolver","lock","mouse","preventScroll","buttons","filterTaps","tapsThreshold","velocity","duration","scaleBounds","angleBounds","_scaleBounds","D","_angleBounds","A","EngineMap","ConfigResolverMap","registerAction","dragAction","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","sharedConfigResolver","_excluded","resolveWith","resolvers","resolver","parse","newConfig","gestureKey","_config","_ref","eventOptions","window","enabled","rest","EventStore","element","handler","options","listeners","type","_options","TimeoutStore","callback","ms","timeout","Controller","handlers","resolveGestures","nativeHandlers","sharedConfig","props","gestureConfig","bindToProps","nativeBindFunction","handlerProp","setupGesture","internalHandlers","withPassiveOption","isNative","_options$capture","_options$passive","useRecognizers","React","useDrag","RESIZE_DEBOUNCE_DELAY","useWidthResize","onResize","elRef","useRef","widthRef","onResizeRef","width","setWidth","useState","setWidthDebauncedRef","pDebounce","useEffect","resizeObserver","_a","getItemsGap","itemWidth","calcItemWidth","isPercentValue","itemWidthNum","itemsGap","translateX","num","bouncedAnimate","animate","el","val","bounceOffset","bounceDir","isBounced","bounceDelay","t","ITEM_WIDTH","SWIPE_THRESHOLD","MAX_BOUNCE_OFFSET","BOUNCE_DELAY","DOT_WIDTH","GLOBAL_STYLE_CONSTANTS","useGalleryItems","itemsLength","onSelect","handleClick","selected","isActive","autoSwipeEnabled","isKeyboardFriendly","stopPropagation","swipeThreshold","showDots","prevPos","offsetRef","hasDraggedRef","dotsElRef","isKeyboardListenerAttachedRef","isGalleryInitted","setIsGalleryInitted","onMove","useCallback","dir","selectOnDrag","pos","itemWidthVal","maxItemsOnScreen","rightLimit","step","nextIdxRaw","nextIdx","idx","onMoveLeft","onMoveRight","handleKeyDown","bind","dragProps","active","xDir","cancel","DEFAULT_TRANSITION_VELOCITY","createStyleClass","transitionVelocity","styleSelected","css","arrowRight","arrowLeft","ACTIVE_DOT_OFFSET","VISIBLE_DOTS","GalleryItems","imageUrls","className","showArrows","rootCls","useMemo","dots","_jsxs","cnx","_Fragment","example_photo","CLASS_NAME","GalleryExample","selectedIdx","setSelectedIdx","isOpen","setIsOpen","GlobalStyles","length","Number","marginBottom","layoutProps","MDXLayout","MDXContent","components","mdx","Meta","Story","isMDXComponent","galleryExample","assertIsFn","storyName","parameters","storySource","componentMeta","title","component","includeStories","mdxStoryNameToKey","docs","page","AddContext","__namedExportsOrder"],"mappings":"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"}