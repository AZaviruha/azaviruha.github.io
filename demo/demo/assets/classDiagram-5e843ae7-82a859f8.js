var W=Object.defineProperty;var g=(r,a)=>W(r,"name",{value:a,configurable:!0});import{p as H,d as S,s as X}from"./styles-88ad4441-60e5eed5.js";import{c as $,l as d,i as l,j as Y}from"./mermaid-a98f434b-6ad3a326.js";import{G as Z,l as D}from"./layout-06a9841d.js";import{s as k}from"./svgDraw-5d8a058e-478ed659.js";import"./preload-helper-d51aff73.js";import"./index-32ac9e7b.js";import"./_commonjsHelpers-df0bf62c.js";import"./memoize-a38ec700.js";import"./_MapCache-7e836c94.js";import"./isArray-6de4a062.js";import"./_getTag-9b3eabd6.js";import"./get-fec7d053.js";import"./isSymbol-3167caec.js";import"./toString-40b958f3.js";import"./now-f5237b2a.js";import"./_arrayReduce-b962fc90.js";import"./line-b92a72a5.js";import"./array-2d8cd92e.js";import"./path-56a6d420.js";let h={};const m=20,p=g(function(r){const a=Object.entries(h).find(L=>L[1].label===r);if(a)return a[0]},"getGraphId"),B=g(function(r){r.append("defs").append("marker").attr("id","extensionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),r.append("defs").append("marker").attr("id","extensionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z"),r.append("defs").append("marker").attr("id","compositionStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id","compositionEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id","aggregationStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id","aggregationEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id","dependencyStart").attr("class","extension").attr("refX",0).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),r.append("defs").append("marker").attr("id","dependencyEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"insertMarkers"),v=g(function(r,a,L,o){const c=$().class;h={},d.info("Rendering diagram "+r);const y=$().securityLevel;let x;y==="sandbox"&&(x=l("#i"+a));const E=y==="sandbox"?l(x.nodes()[0].contentDocument.body):l("body"),n=E.select(`[id='${a}']`);B(n);const e=new Z({multigraph:!0});e.setGraph({isMultiGraph:!0}),e.setDefaultEdgeLabel(function(){return{}});const u=o.db.getClasses(),N=Object.keys(u);for(const t of N){const i=u[t],s=k.drawClass(n,i,c,o);h[s.id]=s,e.setNode(s.id,s),d.info("Org height: "+s.height)}o.db.getRelations().forEach(function(t){d.info("tjoho"+p(t.id1)+p(t.id2)+JSON.stringify(t)),e.setEdge(p(t.id1),p(t.id2),{relation:t},t.title||"DEFAULT")}),o.db.getNotes().forEach(function(t){d.debug(`Adding note: ${JSON.stringify(t)}`);const i=k.drawNote(n,t,c,o);h[i.id]=i,e.setNode(i.id,i),t.class&&t.class in u&&e.setEdge(t.id,p(t.class),{relation:{id1:t.id,id2:t.class,relation:{type1:"none",type2:"none",lineType:10}}},"DEFAULT")}),D(e),e.nodes().forEach(function(t){t!==void 0&&e.node(t)!==void 0&&(d.debug("Node "+t+": "+JSON.stringify(e.node(t))),E.select("#"+(o.db.lookUpDomId(t)||t)).attr("transform","translate("+(e.node(t).x-e.node(t).width/2)+","+(e.node(t).y-e.node(t).height/2)+" )"))}),e.edges().forEach(function(t){t!==void 0&&e.edge(t)!==void 0&&(d.debug("Edge "+t.v+" -> "+t.w+": "+JSON.stringify(e.edge(t))),k.drawEdge(n,e.edge(t),e.edge(t).relation,c,o))});const f=n.node().getBBox(),b=f.width+m*2,w=f.height+m*2;Y(n,w,b,c.useMaxWidth);const M=`${f.x-m} ${f.y-m} ${b} ${w}`;d.debug(`viewBox ${M}`),n.attr("viewBox",M)},"draw"),A={draw:v},nt={parser:H,db:S,renderer:A,styles:X,init:r=>{r.class||(r.class={}),r.class.arrowMarkerAbsolute=r.arrowMarkerAbsolute,S.clear()}};export{nt as diagram};
//# sourceMappingURL=classDiagram-5e843ae7-82a859f8.js.map
