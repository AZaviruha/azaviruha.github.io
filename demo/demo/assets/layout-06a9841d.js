var fr=Object.defineProperty;var s=(n,e)=>fr(n,"name",{value:e,configurable:!0});import{c as Nn,t as tn,i as me,g as dr,b as Cn}from"./get-fec7d053.js";import{o as cr,d as we,i as D,a as _e,b as hr,c as J,f as lr,g as Pn,n as Q,h as An,S as vn}from"./_getTag-9b3eabd6.js";import{r as vr,a as an,b as gr,i as T,S as z}from"./isArray-6de4a062.js";import{U as qn,a as pr,S as In,i as Sn,k as y,b as Ee,t as br,c as xe,g as ye,s as mr,d as wr,e as _r,f as Er,h as Te,j as xr,l as yr,n as Wn}from"./now-f5237b2a.js";import{g as Tr,e as on,b as P,i as En}from"./_MapCache-7e836c94.js";import{a as Y,t as Lr}from"./toString-40b958f3.js";import{a as Or}from"./_arrayReduce-b962fc90.js";import{B as Hn}from"./mermaid-a98f434b-6ad3a326.js";import{i as xn}from"./isSymbol-3167caec.js";var Nr=function(){try{var n=Tr(Object,"defineProperty");return n({},"",{}),n}catch{}}();const nn=Nr;function un(n,e,r){e=="__proto__"&&nn?nn(n,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[e]=r}s(un,"baseAssignValue");function yn(n,e,r){(r!==void 0&&!on(n[e],r)||r===void 0&&!(e in n))&&un(n,e,r)}s(yn,"assignMergeValue");function Cr(n){return function(e,r,t){for(var i=-1,a=Object(e),o=t(e),u=o.length;u--;){var f=o[n?u:++i];if(r(a[f],f,a)===!1)break}return e}}s(Cr,"createBaseFor");var Pr=Cr();const Mn=Pr;var Le=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Kn=Le&&typeof module=="object"&&module&&!module.nodeType&&module,Ar=Kn&&Kn.exports===Le,Xn=Ar?vr.Buffer:void 0,Zn=Xn?Xn.allocUnsafe:void 0;function Oe(n,e){if(e)return n.slice();var r=n.length,t=Zn?Zn(r):new n.constructor(r);return n.copy(t),t}s(Oe,"cloneBuffer");function $n(n){var e=new n.constructor(n.byteLength);return new qn(e).set(new qn(n)),e}s($n,"cloneArrayBuffer");function Ne(n,e){var r=e?$n(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.length)}s(Ne,"cloneTypedArray");function Ce(n,e){var r=-1,t=n.length;for(e||(e=Array(t));++r<t;)e[r]=n[r];return e}s(Ce,"copyArray");var Jn=Object.create,Ir=function(){function n(){}return s(n,"object"),function(e){if(!P(e))return{};if(Jn)return Jn(e);n.prototype=e;var r=new n;return n.prototype=void 0,r}}();const Sr=Ir;var Mr=cr(Object.getPrototypeOf,Object);const Fn=Mr;function Pe(n){return typeof n.constructor=="function"&&!we(n)?Sr(Fn(n)):{}}s(Pe,"initCloneObject");function Ae(n){return an(n)&&D(n)}s(Ae,"isArrayLikeObject");var $r="[object Object]",Fr=Function.prototype,Rr=Object.prototype,Ie=Fr.toString,kr=Rr.hasOwnProperty,Dr=Ie.call(Object);function Gr(n){if(!an(n)||gr(n)!=$r)return!1;var e=Fn(n);if(e===null)return!0;var r=kr.call(e,"constructor")&&e.constructor;return typeof r=="function"&&r instanceof r&&Ie.call(r)==Dr}s(Gr,"isPlainObject");function Tn(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}s(Tn,"safeGet");var Br=Object.prototype,Ur=Br.hasOwnProperty;function sn(n,e,r){var t=n[e];(!(Ur.call(n,e)&&on(t,r))||r===void 0&&!(e in n))&&un(n,e,r)}s(sn,"assignValue");function W(n,e,r,t){var i=!r;r||(r={});for(var a=-1,o=e.length;++a<o;){var u=e[a],f=t?t(r[u],n[u],u,r,n):void 0;f===void 0&&(f=n[u]),i?un(r,u,f):sn(r,u,f)}return r}s(W,"copyObject");function Yr(n){var e=[];if(n!=null)for(var r in Object(n))e.push(r);return e}s(Yr,"nativeKeysIn");var jr=Object.prototype,Vr=jr.hasOwnProperty;function qr(n){if(!P(n))return Yr(n);var e=we(n),r=[];for(var t in n)t=="constructor"&&(e||!Vr.call(n,t))||r.push(t);return r}s(qr,"baseKeysIn");function M(n){return D(n)?pr(n,!0):qr(n)}s(M,"keysIn");function Wr(n){return W(n,M(n))}s(Wr,"toPlainObject");function Hr(n,e,r,t,i,a,o){var u=Tn(n,r),f=Tn(e,r),d=o.get(f);if(d){yn(n,r,d);return}var c=a?a(u,f,r+"",n,e,o):void 0,l=c===void 0;if(l){var v=T(f),g=!v&&_e(f),p=!v&&!g&&hr(f);c=f,v||g||p?T(u)?c=u:Ae(u)?c=Ce(u):g?(l=!1,c=Oe(f,!0)):p?(l=!1,c=Ne(f,!0)):c=[]:Gr(f)||J(f)?(c=u,J(u)?c=Wr(u):(!P(u)||En(u))&&(c=Pe(f))):l=!1}l&&(o.set(f,c),i(c,f,t,a,o),o.delete(f)),yn(n,r,c)}s(Hr,"baseMergeDeep");function Se(n,e,r,t,i){n!==e&&Mn(e,function(a,o){if(i||(i=new In),P(a))Hr(n,e,o,r,Se,t,i);else{var u=t?t(Tn(n,o),a,o+"",n,e,i):void 0;u===void 0&&(u=a),yn(n,o,u)}},M)}s(Se,"baseMerge");function $(n){return n}s($,"identity");function Kr(n,e,r){switch(r.length){case 0:return n.call(e);case 1:return n.call(e,r[0]);case 2:return n.call(e,r[0],r[1]);case 3:return n.call(e,r[0],r[1],r[2])}return n.apply(e,r)}s(Kr,"apply");var Qn=Math.max;function Me(n,e,r){return e=Qn(e===void 0?n.length-1:e,0),function(){for(var t=arguments,i=-1,a=Qn(t.length-e,0),o=Array(a);++i<a;)o[i]=t[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=t[i];return u[e]=r(o),Kr(n,this,u)}}s(Me,"overRest");function R(n){return function(){return n}}s(R,"constant");var Xr=nn?function(n,e){return nn(n,"toString",{configurable:!0,enumerable:!1,value:R(e),writable:!0})}:$;const Zr=Xr;var Jr=800,Qr=16,zr=Date.now;function nt(n){var e=0,r=0;return function(){var t=zr(),i=Qr-(t-r);if(r=t,i>0){if(++e>=Jr)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}s(nt,"shortOut");var et=nt(Zr);const $e=et;function fn(n,e){return $e(Me(n,e,$),n+"")}s(fn,"baseRest");function j(n,e,r){if(!P(r))return!1;var t=typeof e;return(t=="number"?D(r)&&Sn(e,r.length):t=="string"&&e in r)?on(r[e],n):!1}s(j,"isIterateeCall");function rt(n){return fn(function(e,r){var t=-1,i=r.length,a=i>1?r[i-1]:void 0,o=i>2?r[2]:void 0;for(a=n.length>3&&typeof a=="function"?(i--,a):void 0,o&&j(r[0],r[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++t<i;){var u=r[t];u&&n(e,u,t,a)}return e})}s(rt,"createAssigner");function Rn(n,e){return n&&Mn(n,e,y)}s(Rn,"baseForOwn");var tt=1,it=2;function at(n,e,r,t){var i=r.length,a=i,o=!t;if(n==null)return!a;for(n=Object(n);i--;){var u=r[i];if(o&&u[2]?u[1]!==n[u[0]]:!(u[0]in n))return!1}for(;++i<a;){u=r[i];var f=u[0],d=n[f],c=u[1];if(o&&u[2]){if(d===void 0&&!(f in n))return!1}else{var l=new In;if(t)var v=t(d,c,f,n,e,l);if(!(v===void 0?Ee(c,d,tt|it,t,l):v))return!1}}return!0}s(at,"baseIsMatch");function Fe(n){return n===n&&!P(n)}s(Fe,"isStrictComparable");function ot(n){for(var e=y(n),r=e.length;r--;){var t=e[r],i=n[t];e[r]=[t,i,Fe(i)]}return e}s(ot,"getMatchData");function Re(n,e){return function(r){return r==null?!1:r[n]===e&&(e!==void 0||n in Object(r))}}s(Re,"matchesStrictComparable");function ut(n){var e=ot(n);return e.length==1&&e[0][2]?Re(e[0][0],e[0][1]):function(r){return r===n||at(r,n,e)}}s(ut,"baseMatches");function st(n,e){return n!=null&&e in Object(n)}s(st,"baseHasIn");function ke(n,e,r){e=Nn(e,n);for(var t=-1,i=e.length,a=!1;++t<i;){var o=tn(e[t]);if(!(a=n!=null&&r(n,o)))break;n=n[o]}return a||++t!=i?a:(i=n==null?0:n.length,!!i&&lr(i)&&Sn(o,i)&&(T(n)||J(n)))}s(ke,"hasPath");function De(n,e){return n!=null&&ke(n,e,st)}s(De,"hasIn");var ft=1,dt=2;function ct(n,e){return me(n)&&Fe(e)?Re(tn(n),e):function(r){var t=dr(r,n);return t===void 0&&t===e?De(r,n):Ee(e,t,ft|dt)}}s(ct,"baseMatchesProperty");function ht(n){return function(e){return e==null?void 0:e[n]}}s(ht,"baseProperty");function lt(n){return function(e){return Cn(e,n)}}s(lt,"basePropertyDeep");function vt(n){return me(n)?ht(tn(n)):lt(n)}s(vt,"property");function A(n){return typeof n=="function"?n:n==null?$:typeof n=="object"?T(n)?ct(n[0],n[1]):ut(n):vt(n)}s(A,"baseIteratee");function dn(n,e){var r={};return e=A(e),Rn(n,function(t,i,a){un(r,i,e(t,i,a))}),r}s(dn,"mapValues");var zn=1/0,gt=17976931348623157e292;function X(n){if(!n)return n===0?n:0;if(n=br(n),n===zn||n===-zn){var e=n<0?-1:1;return e*gt}return n===n?n:0}s(X,"toFinite");function pt(n){var e=X(n),r=e%1;return e===e?r?e-r:e:0}s(pt,"toInteger");function bt(){}s(bt,"noop");function Ge(n,e){for(var r=-1,t=n==null?0:n.length;++r<t&&e(n[r],r,n)!==!1;);return n}s(Ge,"arrayEach");function Be(n,e,r,t){for(var i=n.length,a=r+(t?1:-1);t?a--:++a<i;)if(e(n[a],a,n))return a;return-1}s(Be,"baseFindIndex");function mt(n){return n!==n}s(mt,"baseIsNaN");function wt(n,e,r){for(var t=r-1,i=n.length;++t<i;)if(n[t]===e)return t;return-1}s(wt,"strictIndexOf");function _t(n,e,r){return e===e?wt(n,e,r):Be(n,mt,r)}s(_t,"baseIndexOf");function Et(n,e){var r=n==null?0:n.length;return!!r&&_t(n,e,0)>-1}s(Et,"arrayIncludes");var ne=z?z.isConcatSpreadable:void 0;function xt(n){return T(n)||J(n)||!!(ne&&n&&n[ne])}s(xt,"isFlattenable");function cn(n,e,r,t,i){var a=-1,o=n.length;for(r||(r=xt),i||(i=[]);++a<o;){var u=n[a];e>0&&r(u)?e>1?cn(u,e-1,r,t,i):xe(i,u):t||(i[i.length]=u)}return i}s(cn,"baseFlatten");function G(n){var e=n==null?0:n.length;return e?cn(n,1):[]}s(G,"flatten");function yt(n){return $e(Me(n,void 0,G),n+"")}s(yt,"flatRest");function Tt(n,e){return n&&W(e,y(e),n)}s(Tt,"baseAssign");function Lt(n,e){return n&&W(e,M(e),n)}s(Lt,"baseAssignIn");function Ot(n,e){return W(n,ye(n),e)}s(Ot,"copySymbols");var Nt=Object.getOwnPropertySymbols,Ct=Nt?function(n){for(var e=[];n;)xe(e,ye(n)),n=Fn(n);return e}:mr;const Ue=Ct;function Pt(n,e){return W(n,Ue(n),e)}s(Pt,"copySymbolsIn");function At(n){return wr(n,M,Ue)}s(At,"getAllKeysIn");var It=Object.prototype,St=It.hasOwnProperty;function Mt(n){var e=n.length,r=new n.constructor(e);return e&&typeof n[0]=="string"&&St.call(n,"index")&&(r.index=n.index,r.input=n.input),r}s(Mt,"initCloneArray");function $t(n,e){var r=e?$n(n.buffer):n.buffer;return new n.constructor(r,n.byteOffset,n.byteLength)}s($t,"cloneDataView");var Ft=/\w*$/;function Rt(n){var e=new n.constructor(n.source,Ft.exec(n));return e.lastIndex=n.lastIndex,e}s(Rt,"cloneRegExp");var ee=z?z.prototype:void 0,re=ee?ee.valueOf:void 0;function kt(n){return re?Object(re.call(n)):{}}s(kt,"cloneSymbol");var Dt="[object Boolean]",Gt="[object Date]",Bt="[object Map]",Ut="[object Number]",Yt="[object RegExp]",jt="[object Set]",Vt="[object String]",qt="[object Symbol]",Wt="[object ArrayBuffer]",Ht="[object DataView]",Kt="[object Float32Array]",Xt="[object Float64Array]",Zt="[object Int8Array]",Jt="[object Int16Array]",Qt="[object Int32Array]",zt="[object Uint8Array]",ni="[object Uint8ClampedArray]",ei="[object Uint16Array]",ri="[object Uint32Array]";function ti(n,e,r){var t=n.constructor;switch(e){case Wt:return $n(n);case Dt:case Gt:return new t(+n);case Ht:return $t(n,r);case Kt:case Xt:case Zt:case Jt:case Qt:case zt:case ni:case ei:case ri:return Ne(n,r);case Bt:return new t;case Ut:case Vt:return new t(n);case Yt:return Rt(n);case jt:return new t;case qt:return kt(n)}}s(ti,"initCloneByTag");var ii="[object Map]";function ai(n){return an(n)&&Pn(n)==ii}s(ai,"baseIsMap");var te=Q&&Q.isMap,oi=te?An(te):ai;const ui=oi;var si="[object Set]";function fi(n){return an(n)&&Pn(n)==si}s(fi,"baseIsSet");var ie=Q&&Q.isSet,di=ie?An(ie):fi;const ci=di;var hi=1,li=2,vi=4,Ye="[object Arguments]",gi="[object Array]",pi="[object Boolean]",bi="[object Date]",mi="[object Error]",je="[object Function]",wi="[object GeneratorFunction]",_i="[object Map]",Ei="[object Number]",Ve="[object Object]",xi="[object RegExp]",yi="[object Set]",Ti="[object String]",Li="[object Symbol]",Oi="[object WeakMap]",Ni="[object ArrayBuffer]",Ci="[object DataView]",Pi="[object Float32Array]",Ai="[object Float64Array]",Ii="[object Int8Array]",Si="[object Int16Array]",Mi="[object Int32Array]",$i="[object Uint8Array]",Fi="[object Uint8ClampedArray]",Ri="[object Uint16Array]",ki="[object Uint32Array]",m={};m[Ye]=m[gi]=m[Ni]=m[Ci]=m[pi]=m[bi]=m[Pi]=m[Ai]=m[Ii]=m[Si]=m[Mi]=m[_i]=m[Ei]=m[Ve]=m[xi]=m[yi]=m[Ti]=m[Li]=m[$i]=m[Fi]=m[Ri]=m[ki]=!0;m[mi]=m[je]=m[Oi]=!1;function Z(n,e,r,t,i,a){var o,u=e&hi,f=e&li,d=e&vi;if(r&&(o=i?r(n,t,i,a):r(n)),o!==void 0)return o;if(!P(n))return n;var c=T(n);if(c){if(o=Mt(n),!u)return Ce(n,o)}else{var l=Pn(n),v=l==je||l==wi;if(_e(n))return Oe(n,u);if(l==Ve||l==Ye||v&&!i){if(o=f||v?{}:Pe(n),!u)return f?Pt(n,Lt(o,n)):Ot(n,Tt(o,n))}else{if(!m[l])return i?n:{};o=ti(n,l,u)}}a||(a=new In);var g=a.get(n);if(g)return g;a.set(n,o),ci(n)?n.forEach(function(x){o.add(Z(x,e,r,x,n,a))}):ui(n)&&n.forEach(function(x,O){o.set(O,Z(x,e,r,O,n,a))});var p=d?f?At:_r:f?M:y,w=c?void 0:p(n);return Ge(w||n,function(x,O){w&&(O=x,x=n[O]),sn(o,O,Z(x,e,r,O,n,a))}),o}s(Z,"baseClone");var Di=1,Gi=4;function Bi(n){return Z(n,Di|Gi)}s(Bi,"cloneDeep");function Ui(n,e){return function(r,t){if(r==null)return r;if(!D(r))return n(r,t);for(var i=r.length,a=e?i:-1,o=Object(r);(e?a--:++a<i)&&t(o[a],a,o)!==!1;);return r}}s(Ui,"createBaseEach");var Yi=Ui(Rn);const hn=Yi;var qe=Object.prototype,ji=qe.hasOwnProperty,Vi=fn(function(n,e){n=Object(n);var r=-1,t=e.length,i=t>2?e[2]:void 0;for(i&&j(e[0],e[1],i)&&(t=1);++r<t;)for(var a=e[r],o=M(a),u=-1,f=o.length;++u<f;){var d=o[u],c=n[d];(c===void 0||on(c,qe[d])&&!ji.call(n,d))&&(n[d]=a[d])}return n});const qi=Vi;function Wi(n,e,r){for(var t=-1,i=n==null?0:n.length;++t<i;)if(r(e,n[t]))return!0;return!1}s(Wi,"arrayIncludesWith");function en(n){var e=n==null?0:n.length;return e?n[e-1]:void 0}s(en,"last");function kn(n){return typeof n=="function"?n:$}s(kn,"castFunction");function h(n,e){var r=T(n)?Ge:hn;return r(n,kn(e))}s(h,"forEach");function Hi(n,e){var r=[];return hn(n,function(t,i,a){e(t,i,a)&&r.push(t)}),r}s(Hi,"baseFilter");function N(n,e){var r=T(n)?Er:Hi;return r(n,A(e))}s(N,"filter");function Ki(n){return function(e,r,t){var i=Object(e);if(!D(e)){var a=A(r);e=y(e),r=s(function(u){return a(i[u],u,i)},"predicate")}var o=n(e,r,t);return o>-1?i[a?e[o]:o]:void 0}}s(Ki,"createFind");var Xi=Math.max;function Zi(n,e,r){var t=n==null?0:n.length;if(!t)return-1;var i=r==null?0:pt(r);return i<0&&(i=Xi(t+i,0)),Be(n,A(e),i)}s(Zi,"findIndex");var Ji=Ki(Zi);const Dn=Ji;function We(n,e){var r=-1,t=D(n)?Array(n.length):[];return hn(n,function(i,a,o){t[++r]=e(i,a,o)}),t}s(We,"baseMap");function _(n,e){var r=T(n)?Y:We;return r(n,A(e))}s(_,"map");function Qi(n,e){return n==null?n:Mn(n,kn(e),M)}s(Qi,"forIn");function zi(n,e){return n&&Rn(n,kn(e))}s(zi,"forOwn");function na(n,e){return n>e}s(na,"baseGt");var ea=Object.prototype,ra=ea.hasOwnProperty;function ta(n,e){return n!=null&&ra.call(n,e)}s(ta,"baseHas");function b(n,e){return n!=null&&ke(n,e,ta)}s(b,"has");function ia(n,e){return Y(e,function(r){return n[r]})}s(ia,"baseValues");function C(n){return n==null?[]:ia(n,y(n))}s(C,"values");function E(n){return n===void 0}s(E,"isUndefined");function He(n,e){return n<e}s(He,"baseLt");function Gn(n,e,r){for(var t=-1,i=n.length;++t<i;){var a=n[t],o=e(a);if(o!=null&&(u===void 0?o===o&&!xn(o):r(o,u)))var u=o,f=a}return f}s(Gn,"baseExtremum");function S(n){return n&&n.length?Gn(n,$,na):void 0}s(S,"max");var aa=rt(function(n,e,r){Se(n,e,r)});const Ln=aa;function V(n){return n&&n.length?Gn(n,$,He):void 0}s(V,"min");function Bn(n,e){return n&&n.length?Gn(n,A(e),He):void 0}s(Bn,"minBy");function oa(n,e,r,t){if(!P(n))return n;e=Nn(e,n);for(var i=-1,a=e.length,o=a-1,u=n;u!=null&&++i<a;){var f=tn(e[i]),d=r;if(f==="__proto__"||f==="constructor"||f==="prototype")return n;if(i!=o){var c=u[f];d=t?t(c,f,u):void 0,d===void 0&&(d=P(c)?c:Sn(e[i+1])?[]:{})}sn(u,f,d),u=u[f]}return n}s(oa,"baseSet");function ua(n,e,r){for(var t=-1,i=e.length,a={};++t<i;){var o=e[t],u=Cn(n,o);r(u,o)&&oa(a,Nn(o,n),u)}return a}s(ua,"basePickBy");function sa(n,e){var r=n.length;for(n.sort(e);r--;)n[r]=n[r].value;return n}s(sa,"baseSortBy");function fa(n,e){if(n!==e){var r=n!==void 0,t=n===null,i=n===n,a=xn(n),o=e!==void 0,u=e===null,f=e===e,d=xn(e);if(!u&&!d&&!a&&n>e||a&&o&&f&&!u&&!d||t&&o&&f||!r&&f||!i)return 1;if(!t&&!a&&!d&&n<e||d&&r&&i&&!t&&!a||u&&r&&i||!o&&i||!f)return-1}return 0}s(fa,"compareAscending");function da(n,e,r){for(var t=-1,i=n.criteria,a=e.criteria,o=i.length,u=r.length;++t<o;){var f=fa(i[t],a[t]);if(f){if(t>=u)return f;var d=r[t];return f*(d=="desc"?-1:1)}}return n.index-e.index}s(da,"compareMultiple");function ca(n,e,r){e.length?e=Y(e,function(a){return T(a)?function(o){return Cn(o,a.length===1?a[0]:a)}:a}):e=[$];var t=-1;e=Y(e,An(A));var i=We(n,function(a,o,u){var f=Y(e,function(d){return d(a)});return{criteria:f,index:++t,value:a}});return sa(i,function(a,o){return da(a,o,r)})}s(ca,"baseOrderBy");function ha(n,e){return ua(n,e,function(r,t){return De(n,t)})}s(ha,"basePick");var la=yt(function(n,e){return n==null?{}:ha(n,e)});const rn=la;var va=Math.ceil,ga=Math.max;function pa(n,e,r,t){for(var i=-1,a=ga(va((e-n)/(r||1)),0),o=Array(a);a--;)o[t?a:++i]=n,n+=r;return o}s(pa,"baseRange");function ba(n){return function(e,r,t){return t&&typeof t!="number"&&j(e,r,t)&&(r=t=void 0),e=X(e),r===void 0?(r=e,e=0):r=X(r),t=t===void 0?e<r?1:-1:X(t),pa(e,r,t,n)}}s(ba,"createRange");var ma=ba();const k=ma;function wa(n,e,r,t,i){return i(n,function(a,o,u){r=t?(t=!1,a):e(r,a,o,u)}),r}s(wa,"baseReduce");function H(n,e,r){var t=T(n)?Or:wa,i=arguments.length<3;return t(n,A(e),r,i,hn)}s(H,"reduce");var _a=fn(function(n,e){if(n==null)return[];var r=e.length;return r>1&&j(n,e[0],e[1])?e=[]:r>2&&j(e[0],e[1],e[2])&&(e=[e[0]]),ca(n,cn(e,1),[])});const K=_a;var Ea=1/0,xa=vn&&1/Te(new vn([,-0]))[1]==Ea?function(n){return new vn(n)}:bt;const ya=xa;var Ta=200;function La(n,e,r){var t=-1,i=Et,a=n.length,o=!0,u=[],f=u;if(r)o=!1,i=Wi;else if(a>=Ta){var d=e?null:ya(n);if(d)return Te(d);o=!1,i=yr,f=new xr}else f=e?[]:u;n:for(;++t<a;){var c=n[t],l=e?e(c):c;if(c=r||c!==0?c:0,o&&l===l){for(var v=f.length;v--;)if(f[v]===l)continue n;e&&f.push(l),u.push(c)}else i(f,l,r)||(f!==u&&f.push(l),u.push(c))}return u}s(La,"baseUniq");var Oa=fn(function(n){return La(cn(n,1,Ae,!0))});const Na=Oa;var Ca=0;function Un(n){var e=++Ca;return Lr(n)+e}s(Un,"uniqueId");function Pa(n,e,r){for(var t=-1,i=n.length,a=e.length,o={};++t<i;){var u=t<a?e[t]:void 0;r(o,n[t],u)}return o}s(Pa,"baseZipObject");function Aa(n,e){return Pa(n||[],e||[],sn)}s(Aa,"zipObject");var Ia="\0",I="\0",ae="";class L{constructor(e={}){this._isDirected=b(e,"directed")?e.directed:!0,this._isMultigraph=b(e,"multigraph")?e.multigraph:!1,this._isCompound=b(e,"compound")?e.compound:!1,this._label=void 0,this._defaultNodeLabelFn=R(void 0),this._defaultEdgeLabelFn=R(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[I]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(e){return this._label=e,this}graph(){return this._label}setDefaultNodeLabel(e){return En(e)||(e=R(e)),this._defaultNodeLabelFn=e,this}nodeCount(){return this._nodeCount}nodes(){return y(this._nodes)}sources(){var e=this;return N(this.nodes(),function(r){return Hn(e._in[r])})}sinks(){var e=this;return N(this.nodes(),function(r){return Hn(e._out[r])})}setNodes(e,r){var t=arguments,i=this;return h(e,function(a){t.length>1?i.setNode(a,r):i.setNode(a)}),this}setNode(e,r){return b(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=r),this):(this._nodes[e]=arguments.length>1?r:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]=I,this._children[e]={},this._children[I][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)}node(e){return this._nodes[e]}hasNode(e){return b(this._nodes,e)}removeNode(e){var r=this;if(b(this._nodes,e)){var t=s(function(i){r.removeEdge(r._edgeObjs[i])},"removeEdge");delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],h(this.children(e),function(i){r.setParent(i)}),delete this._children[e]),h(y(this._in[e]),t),delete this._in[e],delete this._preds[e],h(y(this._out[e]),t),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this}setParent(e,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(E(r))r=I;else{r+="";for(var t=r;!E(t);t=this.parent(t))if(t===e)throw new Error("Setting "+r+" as parent of "+e+" would create a cycle");this.setNode(r)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=r,this._children[r][e]=!0,this}_removeFromParentsChildList(e){delete this._children[this._parent[e]][e]}parent(e){if(this._isCompound){var r=this._parent[e];if(r!==I)return r}}children(e){if(E(e)&&(e=I),this._isCompound){var r=this._children[e];if(r)return y(r)}else{if(e===I)return this.nodes();if(this.hasNode(e))return[]}}predecessors(e){var r=this._preds[e];if(r)return y(r)}successors(e){var r=this._sucs[e];if(r)return y(r)}neighbors(e){var r=this.predecessors(e);if(r)return Na(r,this.successors(e))}isLeaf(e){var r;return this.isDirected()?r=this.successors(e):r=this.neighbors(e),r.length===0}filterNodes(e){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var t=this;h(this._nodes,function(o,u){e(u)&&r.setNode(u,o)}),h(this._edgeObjs,function(o){r.hasNode(o.v)&&r.hasNode(o.w)&&r.setEdge(o,t.edge(o))});var i={};function a(o){var u=t.parent(o);return u===void 0||r.hasNode(u)?(i[o]=u,u):u in i?i[u]:a(u)}return s(a,"findParent"),this._isCompound&&h(r.nodes(),function(o){r.setParent(o,a(o))}),r}setDefaultEdgeLabel(e){return En(e)||(e=R(e)),this._defaultEdgeLabelFn=e,this}edgeCount(){return this._edgeCount}edges(){return C(this._edgeObjs)}setPath(e,r){var t=this,i=arguments;return H(e,function(a,o){return i.length>1?t.setEdge(a,o,r):t.setEdge(a,o),o}),this}setEdge(){var e,r,t,i,a=!1,o=arguments[0];typeof o=="object"&&o!==null&&"v"in o?(e=o.v,r=o.w,t=o.name,arguments.length===2&&(i=arguments[1],a=!0)):(e=o,r=arguments[1],t=arguments[3],arguments.length>2&&(i=arguments[2],a=!0)),e=""+e,r=""+r,E(t)||(t=""+t);var u=U(this._isDirected,e,r,t);if(b(this._edgeLabels,u))return a&&(this._edgeLabels[u]=i),this;if(!E(t)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(r),this._edgeLabels[u]=a?i:this._defaultEdgeLabelFn(e,r,t);var f=Sa(this._isDirected,e,r,t);return e=f.v,r=f.w,Object.freeze(f),this._edgeObjs[u]=f,oe(this._preds[r],e),oe(this._sucs[e],r),this._in[r][u]=f,this._out[e][u]=f,this._edgeCount++,this}edge(e,r,t){var i=arguments.length===1?gn(this._isDirected,arguments[0]):U(this._isDirected,e,r,t);return this._edgeLabels[i]}hasEdge(e,r,t){var i=arguments.length===1?gn(this._isDirected,arguments[0]):U(this._isDirected,e,r,t);return b(this._edgeLabels,i)}removeEdge(e,r,t){var i=arguments.length===1?gn(this._isDirected,arguments[0]):U(this._isDirected,e,r,t),a=this._edgeObjs[i];return a&&(e=a.v,r=a.w,delete this._edgeLabels[i],delete this._edgeObjs[i],ue(this._preds[r],e),ue(this._sucs[e],r),delete this._in[r][i],delete this._out[e][i],this._edgeCount--),this}inEdges(e,r){var t=this._in[e];if(t){var i=C(t);return r?N(i,function(a){return a.v===r}):i}}outEdges(e,r){var t=this._out[e];if(t){var i=C(t);return r?N(i,function(a){return a.w===r}):i}}nodeEdges(e,r){var t=this.inEdges(e,r);if(t)return t.concat(this.outEdges(e,r))}}s(L,"Graph");L.prototype._nodeCount=0;L.prototype._edgeCount=0;function oe(n,e){n[e]?n[e]++:n[e]=1}s(oe,"incrementOrInitEntry");function ue(n,e){--n[e]||delete n[e]}s(ue,"decrementOrRemoveEntry");function U(n,e,r,t){var i=""+e,a=""+r;if(!n&&i>a){var o=i;i=a,a=o}return i+ae+a+ae+(E(t)?Ia:t)}s(U,"edgeArgsToId");function Sa(n,e,r,t){var i=""+e,a=""+r;if(!n&&i>a){var o=i;i=a,a=o}var u={v:i,w:a};return t&&(u.name=t),u}s(Sa,"edgeArgsToObj");function gn(n,e){return U(n,e.v,e.w,e.name)}s(gn,"edgeObjToId");class Ke{constructor(){var e={};e._next=e._prev=e,this._sentinel=e}dequeue(){var e=this._sentinel,r=e._prev;if(r!==e)return se(r),r}enqueue(e){var r=this._sentinel;e._prev&&e._next&&se(e),e._next=r._next,r._next._prev=e,r._next=e,e._prev=r}toString(){for(var e=[],r=this._sentinel,t=r._prev;t!==r;)e.push(JSON.stringify(t,Ma)),t=t._prev;return"["+e.join(", ")+"]"}}s(Ke,"List");function se(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}s(se,"unlink");function Ma(n,e){if(n!=="_next"&&n!=="_prev")return e}s(Ma,"filterOutLinks");var $a=R(1);function Fa(n,e){if(n.nodeCount()<=1)return[];var r=ka(n,e||$a),t=Ra(r.graph,r.buckets,r.zeroIdx);return G(_(t,function(i){return n.outEdges(i.v,i.w)}))}s(Fa,"greedyFAS");function Ra(n,e,r){for(var t=[],i=e[e.length-1],a=e[0],o;n.nodeCount();){for(;o=a.dequeue();)pn(n,e,r,o);for(;o=i.dequeue();)pn(n,e,r,o);if(n.nodeCount()){for(var u=e.length-2;u>0;--u)if(o=e[u].dequeue(),o){t=t.concat(pn(n,e,r,o,!0));break}}}return t}s(Ra,"doGreedyFAS");function pn(n,e,r,t,i){var a=i?[]:void 0;return h(n.inEdges(t.v),function(o){var u=n.edge(o),f=n.node(o.v);i&&a.push({v:o.v,w:o.w}),f.out-=u,On(e,r,f)}),h(n.outEdges(t.v),function(o){var u=n.edge(o),f=o.w,d=n.node(f);d.in-=u,On(e,r,d)}),n.removeNode(t.v),a}s(pn,"removeNode");function ka(n,e){var r=new L,t=0,i=0;h(n.nodes(),function(u){r.setNode(u,{v:u,in:0,out:0})}),h(n.edges(),function(u){var f=r.edge(u.v,u.w)||0,d=e(u),c=f+d;r.setEdge(u.v,u.w,c),i=Math.max(i,r.node(u.v).out+=d),t=Math.max(t,r.node(u.w).in+=d)});var a=k(i+t+3).map(function(){return new Ke}),o=t+1;return h(r.nodes(),function(u){On(a,o,r.node(u))}),{graph:r,buckets:a,zeroIdx:o}}s(ka,"buildState");function On(n,e,r){r.out?r.in?n[r.out-r.in+e].enqueue(r):n[n.length-1].enqueue(r):n[0].enqueue(r)}s(On,"assignBucket");function Da(n){var e=n.graph().acyclicer==="greedy"?Fa(n,r(n)):Ga(n);h(e,function(t){var i=n.edge(t);n.removeEdge(t),i.forwardName=t.name,i.reversed=!0,n.setEdge(t.w,t.v,i,Un("rev"))});function r(t){return function(i){return t.edge(i).weight}}s(r,"weightFn")}s(Da,"run$2");function Ga(n){var e=[],r={},t={};function i(a){b(t,a)||(t[a]=!0,r[a]=!0,h(n.outEdges(a),function(o){b(r,o.w)?e.push(o):i(o.w)}),delete r[a])}return s(i,"dfs"),h(n.nodes(),i),e}s(Ga,"dfsFAS");function Ba(n){h(n.edges(),function(e){var r=n.edge(e);if(r.reversed){n.removeEdge(e);var t=r.forwardName;delete r.reversed,delete r.forwardName,n.setEdge(e.w,e.v,r,t)}})}s(Ba,"undo$2");function B(n,e,r,t){var i;do i=Un(t);while(n.hasNode(i));return r.dummy=e,n.setNode(i,r),i}s(B,"addDummyNode");function Ua(n){var e=new L().setGraph(n.graph());return h(n.nodes(),function(r){e.setNode(r,n.node(r))}),h(n.edges(),function(r){var t=e.edge(r.v,r.w)||{weight:0,minlen:1},i=n.edge(r);e.setEdge(r.v,r.w,{weight:t.weight+i.weight,minlen:Math.max(t.minlen,i.minlen)})}),e}s(Ua,"simplify");function Xe(n){var e=new L({multigraph:n.isMultigraph()}).setGraph(n.graph());return h(n.nodes(),function(r){n.children(r).length||e.setNode(r,n.node(r))}),h(n.edges(),function(r){e.setEdge(r,n.edge(r))}),e}s(Xe,"asNonCompoundGraph");function fe(n,e){var r=n.x,t=n.y,i=e.x-r,a=e.y-t,o=n.width/2,u=n.height/2;if(!i&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var f,d;return Math.abs(a)*o>Math.abs(i)*u?(a<0&&(u=-u),f=u*i/a,d=u):(i<0&&(o=-o),f=o,d=o*a/i),{x:r+f,y:t+d}}s(fe,"intersectRect");function ln(n){var e=_(k(Ze(n)+1),function(){return[]});return h(n.nodes(),function(r){var t=n.node(r),i=t.rank;E(i)||(e[i][t.order]=r)}),e}s(ln,"buildLayerMatrix");function Ya(n){var e=V(_(n.nodes(),function(r){return n.node(r).rank}));h(n.nodes(),function(r){var t=n.node(r);b(t,"rank")&&(t.rank-=e)})}s(Ya,"normalizeRanks");function ja(n){var e=V(_(n.nodes(),function(a){return n.node(a).rank})),r=[];h(n.nodes(),function(a){var o=n.node(a).rank-e;r[o]||(r[o]=[]),r[o].push(a)});var t=0,i=n.graph().nodeRankFactor;h(r,function(a,o){E(a)&&o%i!==0?--t:t&&h(a,function(u){n.node(u).rank+=t})})}s(ja,"removeEmptyRanks");function de(n,e,r,t){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=t),B(n,"border",i,e)}s(de,"addBorderNode$1");function Ze(n){return S(_(n.nodes(),function(e){var r=n.node(e).rank;if(!E(r))return r}))}s(Ze,"maxRank");function Va(n,e){var r={lhs:[],rhs:[]};return h(n,function(t){e(t)?r.lhs.push(t):r.rhs.push(t)}),r}s(Va,"partition");function qa(n,e){var r=Wn();try{return e()}finally{console.log(n+" time: "+(Wn()-r)+"ms")}}s(qa,"time");function Wa(n,e){return e()}s(Wa,"notime");function Ha(n){function e(r){var t=n.children(r),i=n.node(r);if(t.length&&h(t,e),b(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var a=i.minRank,o=i.maxRank+1;a<o;++a)ce(n,"borderLeft","_bl",r,i,a),ce(n,"borderRight","_br",r,i,a)}}s(e,"dfs"),h(n.children(),e)}s(Ha,"addBorderSegments");function ce(n,e,r,t,i,a){var o={width:0,height:0,rank:a,borderType:e},u=i[e][a-1],f=B(n,"border",o,r);i[e][a]=f,n.setParent(f,t),u&&n.setEdge(u,f,{weight:1})}s(ce,"addBorderNode");function Ka(n){var e=n.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&Je(n)}s(Ka,"adjust");function Xa(n){var e=n.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&Za(n),(e==="lr"||e==="rl")&&(Ja(n),Je(n))}s(Xa,"undo$1");function Je(n){h(n.nodes(),function(e){he(n.node(e))}),h(n.edges(),function(e){he(n.edge(e))})}s(Je,"swapWidthHeight");function he(n){var e=n.width;n.width=n.height,n.height=e}s(he,"swapWidthHeightOne");function Za(n){h(n.nodes(),function(e){bn(n.node(e))}),h(n.edges(),function(e){var r=n.edge(e);h(r.points,bn),b(r,"y")&&bn(r)})}s(Za,"reverseY");function bn(n){n.y=-n.y}s(bn,"reverseYOne");function Ja(n){h(n.nodes(),function(e){mn(n.node(e))}),h(n.edges(),function(e){var r=n.edge(e);h(r.points,mn),b(r,"x")&&mn(r)})}s(Ja,"swapXY");function mn(n){var e=n.x;n.x=n.y,n.y=e}s(mn,"swapXYOne");function Qa(n){n.graph().dummyChains=[],h(n.edges(),function(e){za(n,e)})}s(Qa,"run$1");function za(n,e){var r=e.v,t=n.node(r).rank,i=e.w,a=n.node(i).rank,o=e.name,u=n.edge(e),f=u.labelRank;if(a!==t+1){n.removeEdge(e);var d,c,l;for(l=0,++t;t<a;++l,++t)u.points=[],c={width:0,height:0,edgeLabel:u,edgeObj:e,rank:t},d=B(n,"edge",c,"_d"),t===f&&(c.width=u.width,c.height=u.height,c.dummy="edge-label",c.labelpos=u.labelpos),n.setEdge(r,d,{weight:u.weight},o),l===0&&n.graph().dummyChains.push(d),r=d;n.setEdge(r,i,{weight:u.weight},o)}}s(za,"normalizeEdge");function no(n){h(n.graph().dummyChains,function(e){var r=n.node(e),t=r.edgeLabel,i;for(n.setEdge(r.edgeObj,t);r.dummy;)i=n.successors(e)[0],n.removeNode(e),t.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height),e=i,r=n.node(e)})}s(no,"undo");function Yn(n){var e={};function r(t){var i=n.node(t);if(b(e,t))return i.rank;e[t]=!0;var a=V(_(n.outEdges(t),function(o){return r(o.w)-n.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),i.rank=a}s(r,"dfs"),h(n.sources(),r)}s(Yn,"longestPath");function q(n,e){return n.node(e.w).rank-n.node(e.v).rank-n.edge(e).minlen}s(q,"slack");function Qe(n){var e=new L({directed:!1}),r=n.nodes()[0],t=n.nodeCount();e.setNode(r,{});for(var i,a;eo(e,n)<t;)i=ro(e,n),a=e.hasNode(i.v)?q(n,i):-q(n,i),to(e,n,a);return e}s(Qe,"feasibleTree");function eo(n,e){function r(t){h(e.nodeEdges(t),function(i){var a=i.v,o=t===a?i.w:a;!n.hasNode(o)&&!q(e,i)&&(n.setNode(o,{}),n.setEdge(t,o,{}),r(o))})}return s(r,"dfs"),h(n.nodes(),r),n.nodeCount()}s(eo,"tightTree");function ro(n,e){return Bn(e.edges(),function(r){if(n.hasNode(r.v)!==n.hasNode(r.w))return q(e,r)})}s(ro,"findMinSlackEdge");function to(n,e,r){h(n.nodes(),function(t){e.node(t).rank+=r})}s(to,"shiftRanks");function io(){}s(io,"CycleException");io.prototype=new Error;function ze(n,e,r){T(e)||(e=[e]);var t=(n.isDirected()?n.successors:n.neighbors).bind(n),i=[],a={};return h(e,function(o){if(!n.hasNode(o))throw new Error("Graph does not have node: "+o);nr(n,o,r==="post",a,t,i)}),i}s(ze,"dfs$1");function nr(n,e,r,t,i,a){b(t,e)||(t[e]=!0,r||a.push(e),h(i(e),function(o){nr(n,o,r,t,i,a)}),r&&a.push(e))}s(nr,"doDfs");function ao(n,e){return ze(n,e,"post")}s(ao,"postorder$1");function oo(n,e){return ze(n,e,"pre")}s(oo,"preorder");F.initLowLimValues=Vn;F.initCutValues=jn;F.calcCutValue=er;F.leaveEdge=tr;F.enterEdge=ir;F.exchangeEdges=ar;function F(n){n=Ua(n),Yn(n);var e=Qe(n);Vn(e),jn(e,n);for(var r,t;r=tr(e);)t=ir(e,n,r),ar(e,n,r,t)}s(F,"networkSimplex");function jn(n,e){var r=ao(n,n.nodes());r=r.slice(0,r.length-1),h(r,function(t){uo(n,e,t)})}s(jn,"initCutValues");function uo(n,e,r){var t=n.node(r),i=t.parent;n.edge(r,i).cutvalue=er(n,e,r)}s(uo,"assignCutValue");function er(n,e,r){var t=n.node(r),i=t.parent,a=!0,o=e.edge(r,i),u=0;return o||(a=!1,o=e.edge(i,r)),u=o.weight,h(e.nodeEdges(r),function(f){var d=f.v===r,c=d?f.w:f.v;if(c!==i){var l=d===a,v=e.edge(f).weight;if(u+=l?v:-v,fo(n,r,c)){var g=n.edge(r,c).cutvalue;u+=l?-g:g}}}),u}s(er,"calcCutValue");function Vn(n,e){arguments.length<2&&(e=n.nodes()[0]),rr(n,{},1,e)}s(Vn,"initLowLimValues");function rr(n,e,r,t,i){var a=r,o=n.node(t);return e[t]=!0,h(n.neighbors(t),function(u){b(e,u)||(r=rr(n,e,r,u,t))}),o.low=a,o.lim=r++,i?o.parent=i:delete o.parent,r}s(rr,"dfsAssignLowLim");function tr(n){return Dn(n.edges(),function(e){return n.edge(e).cutvalue<0})}s(tr,"leaveEdge");function ir(n,e,r){var t=r.v,i=r.w;e.hasEdge(t,i)||(t=r.w,i=r.v);var a=n.node(t),o=n.node(i),u=a,f=!1;a.lim>o.lim&&(u=o,f=!0);var d=N(e.edges(),function(c){return f===le(n,n.node(c.v),u)&&f!==le(n,n.node(c.w),u)});return Bn(d,function(c){return q(e,c)})}s(ir,"enterEdge");function ar(n,e,r,t){var i=r.v,a=r.w;n.removeEdge(i,a),n.setEdge(t.v,t.w,{}),Vn(n),jn(n,e),so(n,e)}s(ar,"exchangeEdges");function so(n,e){var r=Dn(n.nodes(),function(i){return!e.node(i).parent}),t=oo(n,r);t=t.slice(1),h(t,function(i){var a=n.node(i).parent,o=e.edge(i,a),u=!1;o||(o=e.edge(a,i),u=!0),e.node(i).rank=e.node(a).rank+(u?o.minlen:-o.minlen)})}s(so,"updateRanks");function fo(n,e,r){return n.hasEdge(e,r)}s(fo,"isTreeEdge");function le(n,e,r){return r.low<=e.lim&&e.lim<=r.lim}s(le,"isDescendant");function co(n){switch(n.graph().ranker){case"network-simplex":ve(n);break;case"tight-tree":lo(n);break;case"longest-path":ho(n);break;default:ve(n)}}s(co,"rank");var ho=Yn;function lo(n){Yn(n),Qe(n)}s(lo,"tightTreeRanker");function ve(n){F(n)}s(ve,"networkSimplexRanker");function vo(n){var e=B(n,"root",{},"_root"),r=go(n),t=S(C(r))-1,i=2*t+1;n.graph().nestingRoot=e,h(n.edges(),function(o){n.edge(o).minlen*=i});var a=po(n)+1;h(n.children(),function(o){or(n,e,i,a,t,r,o)}),n.graph().nodeRankFactor=i}s(vo,"run");function or(n,e,r,t,i,a,o){var u=n.children(o);if(!u.length){o!==e&&n.setEdge(e,o,{weight:0,minlen:r});return}var f=de(n,"_bt"),d=de(n,"_bb"),c=n.node(o);n.setParent(f,o),c.borderTop=f,n.setParent(d,o),c.borderBottom=d,h(u,function(l){or(n,e,r,t,i,a,l);var v=n.node(l),g=v.borderTop?v.borderTop:l,p=v.borderBottom?v.borderBottom:l,w=v.borderTop?t:2*t,x=g!==p?1:i-a[o]+1;n.setEdge(f,g,{weight:w,minlen:x,nestingEdge:!0}),n.setEdge(p,d,{weight:w,minlen:x,nestingEdge:!0})}),n.parent(o)||n.setEdge(e,f,{weight:0,minlen:i+a[o]})}s(or,"dfs");function go(n){var e={};function r(t,i){var a=n.children(t);a&&a.length&&h(a,function(o){r(o,i+1)}),e[t]=i}return s(r,"dfs"),h(n.children(),function(t){r(t,1)}),e}s(go,"treeDepths");function po(n){return H(n.edges(),function(e,r){return e+n.edge(r).weight},0)}s(po,"sumWeights");function bo(n){var e=n.graph();n.removeNode(e.nestingRoot),delete e.nestingRoot,h(n.edges(),function(r){var t=n.edge(r);t.nestingEdge&&n.removeEdge(r)})}s(bo,"cleanup");function mo(n,e,r){var t={},i;h(r,function(a){for(var o=n.parent(a),u,f;o;){if(u=n.parent(o),u?(f=t[u],t[u]=o):(f=i,i=o),f&&f!==o){e.setEdge(f,o);return}o=u}})}s(mo,"addSubgraphConstraints");function wo(n,e,r){var t=_o(n),i=new L({compound:!0}).setGraph({root:t}).setDefaultNodeLabel(function(a){return n.node(a)});return h(n.nodes(),function(a){var o=n.node(a),u=n.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(i.setNode(a),i.setParent(a,u||t),h(n[r](a),function(f){var d=f.v===a?f.w:f.v,c=i.edge(d,a),l=E(c)?0:c.weight;i.setEdge(d,a,{weight:n.edge(f).weight+l})}),b(o,"minRank")&&i.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),i}s(wo,"buildLayerGraph");function _o(n){for(var e;n.hasNode(e=Un("_root")););return e}s(_o,"createRootNode");function Eo(n,e){for(var r=0,t=1;t<e.length;++t)r+=xo(n,e[t-1],e[t]);return r}s(Eo,"crossCount");function xo(n,e,r){for(var t=Aa(r,_(r,function(d,c){return c})),i=G(_(e,function(d){return K(_(n.outEdges(d),function(c){return{pos:t[c.w],weight:n.edge(c).weight}}),"pos")})),a=1;a<r.length;)a<<=1;var o=2*a-1;a-=1;var u=_(new Array(o),function(){return 0}),f=0;return h(i.forEach(function(d){var c=d.pos+a;u[c]+=d.weight;for(var l=0;c>0;)c%2&&(l+=u[c+1]),c=c-1>>1,u[c]+=d.weight;f+=d.weight*l})),f}s(xo,"twoLayerCrossCount");function yo(n){var e={},r=N(n.nodes(),function(u){return!n.children(u).length}),t=S(_(r,function(u){return n.node(u).rank})),i=_(k(t+1),function(){return[]});function a(u){if(!b(e,u)){e[u]=!0;var f=n.node(u);i[f.rank].push(u),h(n.successors(u),a)}}s(a,"dfs");var o=K(r,function(u){return n.node(u).rank});return h(o,a),i}s(yo,"initOrder");function To(n,e){return _(e,function(r){var t=n.inEdges(r);if(t.length){var i=H(t,function(a,o){var u=n.edge(o),f=n.node(o.v);return{sum:a.sum+u.weight*f.order,weight:a.weight+u.weight}},{sum:0,weight:0});return{v:r,barycenter:i.sum/i.weight,weight:i.weight}}else return{v:r}})}s(To,"barycenter");function Lo(n,e){var r={};h(n,function(i,a){var o=r[i.v]={indegree:0,in:[],out:[],vs:[i.v],i:a};E(i.barycenter)||(o.barycenter=i.barycenter,o.weight=i.weight)}),h(e.edges(),function(i){var a=r[i.v],o=r[i.w];!E(a)&&!E(o)&&(o.indegree++,a.out.push(r[i.w]))});var t=N(r,function(i){return!i.indegree});return Oo(t)}s(Lo,"resolveConflicts");function Oo(n){var e=[];function r(a){return function(o){o.merged||(E(o.barycenter)||E(a.barycenter)||o.barycenter>=a.barycenter)&&No(a,o)}}s(r,"handleIn");function t(a){return function(o){o.in.push(a),--o.indegree===0&&n.push(o)}}for(s(t,"handleOut");n.length;){var i=n.pop();e.push(i),h(i.in.reverse(),r(i)),h(i.out,t(i))}return _(N(e,function(a){return!a.merged}),function(a){return rn(a,["vs","i","barycenter","weight"])})}s(Oo,"doResolveConflicts");function No(n,e){var r=0,t=0;n.weight&&(r+=n.barycenter*n.weight,t+=n.weight),e.weight&&(r+=e.barycenter*e.weight,t+=e.weight),n.vs=e.vs.concat(n.vs),n.barycenter=r/t,n.weight=t,n.i=Math.min(e.i,n.i),e.merged=!0}s(No,"mergeEntries");function Co(n,e){var r=Va(n,function(c){return b(c,"barycenter")}),t=r.lhs,i=K(r.rhs,function(c){return-c.i}),a=[],o=0,u=0,f=0;t.sort(Po(!!e)),f=ge(a,i,f),h(t,function(c){f+=c.vs.length,a.push(c.vs),o+=c.barycenter*c.weight,u+=c.weight,f=ge(a,i,f)});var d={vs:G(a)};return u&&(d.barycenter=o/u,d.weight=u),d}s(Co,"sort");function ge(n,e,r){for(var t;e.length&&(t=en(e)).i<=r;)e.pop(),n.push(t.vs),r++;return r}s(ge,"consumeUnsortable");function Po(n){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:n?r.i-e.i:e.i-r.i}}s(Po,"compareWithBias");function ur(n,e,r,t){var i=n.children(e),a=n.node(e),o=a?a.borderLeft:void 0,u=a?a.borderRight:void 0,f={};o&&(i=N(i,function(p){return p!==o&&p!==u}));var d=To(n,i);h(d,function(p){if(n.children(p.v).length){var w=ur(n,p.v,r,t);f[p.v]=w,b(w,"barycenter")&&Io(p,w)}});var c=Lo(d,r);Ao(c,f);var l=Co(c,t);if(o&&(l.vs=G([o,l.vs,u]),n.predecessors(o).length)){var v=n.node(n.predecessors(o)[0]),g=n.node(n.predecessors(u)[0]);b(l,"barycenter")||(l.barycenter=0,l.weight=0),l.barycenter=(l.barycenter*l.weight+v.order+g.order)/(l.weight+2),l.weight+=2}return l}s(ur,"sortSubgraph");function Ao(n,e){h(n,function(r){r.vs=G(r.vs.map(function(t){return e[t]?e[t].vs:t}))})}s(Ao,"expandSubgraphs");function Io(n,e){E(n.barycenter)?(n.barycenter=e.barycenter,n.weight=e.weight):(n.barycenter=(n.barycenter*n.weight+e.barycenter*e.weight)/(n.weight+e.weight),n.weight+=e.weight)}s(Io,"mergeBarycenters");function So(n){var e=Ze(n),r=pe(n,k(1,e+1),"inEdges"),t=pe(n,k(e-1,-1,-1),"outEdges"),i=yo(n);be(n,i);for(var a=Number.POSITIVE_INFINITY,o,u=0,f=0;f<4;++u,++f){Mo(u%2?r:t,u%4>=2),i=ln(n);var d=Eo(n,i);d<a&&(f=0,o=Bi(i),a=d)}be(n,o)}s(So,"order");function pe(n,e,r){return _(e,function(t){return wo(n,t,r)})}s(pe,"buildLayerGraphs");function Mo(n,e){var r=new L;h(n,function(t){var i=t.graph().root,a=ur(t,i,r,e);h(a.vs,function(o,u){t.node(o).order=u}),mo(t,r,a.vs)})}s(Mo,"sweepLayerGraphs");function be(n,e){h(e,function(r){h(r,function(t,i){n.node(t).order=i})})}s(be,"assignOrder");function $o(n){var e=Ro(n);h(n.graph().dummyChains,function(r){for(var t=n.node(r),i=t.edgeObj,a=Fo(n,e,i.v,i.w),o=a.path,u=a.lca,f=0,d=o[f],c=!0;r!==i.w;){if(t=n.node(r),c){for(;(d=o[f])!==u&&n.node(d).maxRank<t.rank;)f++;d===u&&(c=!1)}if(!c){for(;f<o.length-1&&n.node(d=o[f+1]).minRank<=t.rank;)f++;d=o[f]}n.setParent(r,d),r=n.successors(r)[0]}})}s($o,"parentDummyChains");function Fo(n,e,r,t){var i=[],a=[],o=Math.min(e[r].low,e[t].low),u=Math.max(e[r].lim,e[t].lim),f,d;f=r;do f=n.parent(f),i.push(f);while(f&&(e[f].low>o||u>e[f].lim));for(d=f,f=t;(f=n.parent(f))!==d;)a.push(f);return{path:i.concat(a.reverse()),lca:d}}s(Fo,"findPath");function Ro(n){var e={},r=0;function t(i){var a=r;h(n.children(i),t),e[i]={low:a,lim:r++}}return s(t,"dfs"),h(n.children(),t),e}s(Ro,"postorder");function ko(n,e){var r={};function t(i,a){var o=0,u=0,f=i.length,d=en(a);return h(a,function(c,l){var v=Go(n,c),g=v?n.node(v).order:f;(v||c===d)&&(h(a.slice(u,l+1),function(p){h(n.predecessors(p),function(w){var x=n.node(w),O=x.order;(O<o||g<O)&&!(x.dummy&&n.node(p).dummy)&&sr(r,w,p)})}),u=l+1,o=g)}),a}return s(t,"visitLayer"),H(e,t),r}s(ko,"findType1Conflicts");function Do(n,e){var r={};function t(a,o,u,f,d){var c;h(k(o,u),function(l){c=a[l],n.node(c).dummy&&h(n.predecessors(c),function(v){var g=n.node(v);g.dummy&&(g.order<f||g.order>d)&&sr(r,v,c)})})}s(t,"scan");function i(a,o){var u=-1,f,d=0;return h(o,function(c,l){if(n.node(c).dummy==="border"){var v=n.predecessors(c);v.length&&(f=n.node(v[0]).order,t(o,d,l,u,f),d=l,u=f)}t(o,d,o.length,f,a.length)}),o}return s(i,"visitLayer"),H(e,i),r}s(Do,"findType2Conflicts");function Go(n,e){if(n.node(e).dummy)return Dn(n.predecessors(e),function(r){return n.node(r).dummy})}s(Go,"findOtherInnerSegmentNode");function sr(n,e,r){if(e>r){var t=e;e=r,r=t}var i=n[e];i||(n[e]=i={}),i[r]=!0}s(sr,"addConflict");function Bo(n,e,r){if(e>r){var t=e;e=r,r=t}return b(n[e],r)}s(Bo,"hasConflict");function Uo(n,e,r,t){var i={},a={},o={};return h(e,function(u){h(u,function(f,d){i[f]=f,a[f]=f,o[f]=d})}),h(e,function(u){var f=-1;h(u,function(d){var c=t(d);if(c.length){c=K(c,function(w){return o[w]});for(var l=(c.length-1)/2,v=Math.floor(l),g=Math.ceil(l);v<=g;++v){var p=c[v];a[d]===d&&f<o[p]&&!Bo(r,d,p)&&(a[p]=d,a[d]=i[d]=i[p],f=o[p])}}})}),{root:i,align:a}}s(Uo,"verticalAlignment");function Yo(n,e,r,t,i){var a={},o=jo(n,e,r,i),u=i?"borderLeft":"borderRight";function f(l,v){for(var g=o.nodes(),p=g.pop(),w={};p;)w[p]?l(p):(w[p]=!0,g.push(p),g=g.concat(v(p))),p=g.pop()}s(f,"iterate");function d(l){a[l]=o.inEdges(l).reduce(function(v,g){return Math.max(v,a[g.v]+o.edge(g))},0)}s(d,"pass1");function c(l){var v=o.outEdges(l).reduce(function(p,w){return Math.min(p,a[w.w]-o.edge(w))},Number.POSITIVE_INFINITY),g=n.node(l);v!==Number.POSITIVE_INFINITY&&g.borderType!==u&&(a[l]=Math.max(a[l],v))}return s(c,"pass2"),f(d,o.predecessors.bind(o)),f(c,o.successors.bind(o)),h(t,function(l){a[l]=a[r[l]]}),a}s(Yo,"horizontalCompaction");function jo(n,e,r,t){var i=new L,a=n.graph(),o=Ko(a.nodesep,a.edgesep,t);return h(e,function(u){var f;h(u,function(d){var c=r[d];if(i.setNode(c),f){var l=r[f],v=i.edge(l,c);i.setEdge(l,c,Math.max(o(n,d,f),v||0))}f=d})}),i}s(jo,"buildBlockGraph");function Vo(n,e){return Bn(C(e),function(r){var t=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return Qi(r,function(a,o){var u=Xo(n,o)/2;t=Math.max(a+u,t),i=Math.min(a-u,i)}),t-i})}s(Vo,"findSmallestWidthAlignment");function qo(n,e){var r=C(e),t=V(r),i=S(r);h(["u","d"],function(a){h(["l","r"],function(o){var u=a+o,f=n[u],d;if(f!==e){var c=C(f);d=o==="l"?t-V(c):i-S(c),d&&(n[u]=dn(f,function(l){return l+d}))}})})}s(qo,"alignCoordinates");function Wo(n,e){return dn(n.ul,function(r,t){if(e)return n[e.toLowerCase()][t];var i=K(_(n,t));return(i[1]+i[2])/2})}s(Wo,"balance");function Ho(n){var e=ln(n),r=Ln(ko(n,e),Do(n,e)),t={},i;h(["u","d"],function(o){i=o==="u"?e:C(e).reverse(),h(["l","r"],function(u){u==="r"&&(i=_(i,function(l){return C(l).reverse()}));var f=(o==="u"?n.predecessors:n.successors).bind(n),d=Uo(n,i,r,f),c=Yo(n,i,d.root,d.align,u==="r");u==="r"&&(c=dn(c,function(l){return-l})),t[o+u]=c})});var a=Vo(n,t);return qo(t,a),Wo(t,n.graph().align)}s(Ho,"positionX");function Ko(n,e,r){return function(t,i,a){var o=t.node(i),u=t.node(a),f=0,d;if(f+=o.width/2,b(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":d=-o.width/2;break;case"r":d=o.width/2;break}if(d&&(f+=r?d:-d),d=0,f+=(o.dummy?e:n)/2,f+=(u.dummy?e:n)/2,f+=u.width/2,b(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":d=u.width/2;break;case"r":d=-u.width/2;break}return d&&(f+=r?d:-d),d=0,f}}s(Ko,"sep");function Xo(n,e){return n.node(e).width}s(Xo,"width");function Zo(n){n=Xe(n),Jo(n),zi(Ho(n),function(e,r){n.node(r).x=e})}s(Zo,"position");function Jo(n){var e=ln(n),r=n.graph().ranksep,t=0;h(e,function(i){var a=S(_(i,function(o){return n.node(o).height}));h(i,function(o){n.node(o).y=t+a/2}),t+=a+r})}s(Jo,"positionY");function Iu(n,e){var r=e&&e.debugTiming?qa:Wa;r("layout",function(){var t=r("  buildLayoutGraph",function(){return su(n)});r("  runLayout",function(){Qo(t,r)}),r("  updateInputGraph",function(){zo(n,t)})})}s(Iu,"layout");function Qo(n,e){e("    makeSpaceForEdgeLabels",function(){fu(n)}),e("    removeSelfEdges",function(){mu(n)}),e("    acyclic",function(){Da(n)}),e("    nestingGraph.run",function(){vo(n)}),e("    rank",function(){co(Xe(n))}),e("    injectEdgeLabelProxies",function(){du(n)}),e("    removeEmptyRanks",function(){ja(n)}),e("    nestingGraph.cleanup",function(){bo(n)}),e("    normalizeRanks",function(){Ya(n)}),e("    assignRankMinMax",function(){cu(n)}),e("    removeEdgeLabelProxies",function(){hu(n)}),e("    normalize.run",function(){Qa(n)}),e("    parentDummyChains",function(){$o(n)}),e("    addBorderSegments",function(){Ha(n)}),e("    order",function(){So(n)}),e("    insertSelfEdges",function(){wu(n)}),e("    adjustCoordinateSystem",function(){Ka(n)}),e("    position",function(){Zo(n)}),e("    positionSelfEdges",function(){_u(n)}),e("    removeBorderNodes",function(){bu(n)}),e("    normalize.undo",function(){no(n)}),e("    fixupEdgeLabelCoords",function(){gu(n)}),e("    undoCoordinateSystem",function(){Xa(n)}),e("    translateGraph",function(){lu(n)}),e("    assignNodeIntersects",function(){vu(n)}),e("    reversePoints",function(){pu(n)}),e("    acyclic.undo",function(){Ba(n)})}s(Qo,"runLayout");function zo(n,e){h(n.nodes(),function(r){var t=n.node(r),i=e.node(r);t&&(t.x=i.x,t.y=i.y,e.children(r).length&&(t.width=i.width,t.height=i.height))}),h(n.edges(),function(r){var t=n.edge(r),i=e.edge(r);t.points=i.points,b(i,"x")&&(t.x=i.x,t.y=i.y)}),n.graph().width=e.graph().width,n.graph().height=e.graph().height}s(zo,"updateInputGraph");var nu=["nodesep","edgesep","ranksep","marginx","marginy"],eu={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},ru=["acyclicer","ranker","rankdir","align"],tu=["width","height"],iu={width:0,height:0},au=["minlen","weight","width","height","labeloffset"],ou={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},uu=["labelpos"];function su(n){var e=new L({multigraph:!0,compound:!0}),r=_n(n.graph());return e.setGraph(Ln({},eu,wn(r,nu),rn(r,ru))),h(n.nodes(),function(t){var i=_n(n.node(t));e.setNode(t,qi(wn(i,tu),iu)),e.setParent(t,n.parent(t))}),h(n.edges(),function(t){var i=_n(n.edge(t));e.setEdge(t,Ln({},ou,wn(i,au),rn(i,uu)))}),e}s(su,"buildLayoutGraph");function fu(n){var e=n.graph();e.ranksep/=2,h(n.edges(),function(r){var t=n.edge(r);t.minlen*=2,t.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?t.width+=t.labeloffset:t.height+=t.labeloffset)})}s(fu,"makeSpaceForEdgeLabels");function du(n){h(n.edges(),function(e){var r=n.edge(e);if(r.width&&r.height){var t=n.node(e.v),i=n.node(e.w),a={rank:(i.rank-t.rank)/2+t.rank,e};B(n,"edge-proxy",a,"_ep")}})}s(du,"injectEdgeLabelProxies");function cu(n){var e=0;h(n.nodes(),function(r){var t=n.node(r);t.borderTop&&(t.minRank=n.node(t.borderTop).rank,t.maxRank=n.node(t.borderBottom).rank,e=S(e,t.maxRank))}),n.graph().maxRank=e}s(cu,"assignRankMinMax");function hu(n){h(n.nodes(),function(e){var r=n.node(e);r.dummy==="edge-proxy"&&(n.edge(r.e).labelRank=r.rank,n.removeNode(e))})}s(hu,"removeEdgeLabelProxies");function lu(n){var e=Number.POSITIVE_INFINITY,r=0,t=Number.POSITIVE_INFINITY,i=0,a=n.graph(),o=a.marginx||0,u=a.marginy||0;function f(d){var c=d.x,l=d.y,v=d.width,g=d.height;e=Math.min(e,c-v/2),r=Math.max(r,c+v/2),t=Math.min(t,l-g/2),i=Math.max(i,l+g/2)}s(f,"getExtremes"),h(n.nodes(),function(d){f(n.node(d))}),h(n.edges(),function(d){var c=n.edge(d);b(c,"x")&&f(c)}),e-=o,t-=u,h(n.nodes(),function(d){var c=n.node(d);c.x-=e,c.y-=t}),h(n.edges(),function(d){var c=n.edge(d);h(c.points,function(l){l.x-=e,l.y-=t}),b(c,"x")&&(c.x-=e),b(c,"y")&&(c.y-=t)}),a.width=r-e+o,a.height=i-t+u}s(lu,"translateGraph");function vu(n){h(n.edges(),function(e){var r=n.edge(e),t=n.node(e.v),i=n.node(e.w),a,o;r.points?(a=r.points[0],o=r.points[r.points.length-1]):(r.points=[],a=i,o=t),r.points.unshift(fe(t,a)),r.points.push(fe(i,o))})}s(vu,"assignNodeIntersects");function gu(n){h(n.edges(),function(e){var r=n.edge(e);if(b(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}s(gu,"fixupEdgeLabelCoords");function pu(n){h(n.edges(),function(e){var r=n.edge(e);r.reversed&&r.points.reverse()})}s(pu,"reversePointsForReversedEdges");function bu(n){h(n.nodes(),function(e){if(n.children(e).length){var r=n.node(e),t=n.node(r.borderTop),i=n.node(r.borderBottom),a=n.node(en(r.borderLeft)),o=n.node(en(r.borderRight));r.width=Math.abs(o.x-a.x),r.height=Math.abs(i.y-t.y),r.x=a.x+r.width/2,r.y=t.y+r.height/2}}),h(n.nodes(),function(e){n.node(e).dummy==="border"&&n.removeNode(e)})}s(bu,"removeBorderNodes");function mu(n){h(n.edges(),function(e){if(e.v===e.w){var r=n.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:n.edge(e)}),n.removeEdge(e)}})}s(mu,"removeSelfEdges");function wu(n){var e=ln(n);h(e,function(r){var t=0;h(r,function(i,a){var o=n.node(i);o.order=a+t,h(o.selfEdges,function(u){B(n,"selfedge",{width:u.label.width,height:u.label.height,rank:o.rank,order:a+ ++t,e:u.e,label:u.label},"_se")}),delete o.selfEdges})})}s(wu,"insertSelfEdges");function _u(n){h(n.nodes(),function(e){var r=n.node(e);if(r.dummy==="selfedge"){var t=n.node(r.e.v),i=t.x+t.width/2,a=t.y,o=r.x-i,u=t.height/2;n.setEdge(r.e,r.label),n.removeNode(e),r.label.points=[{x:i+2*o/3,y:a-u},{x:i+5*o/6,y:a-u},{x:i+o,y:a},{x:i+5*o/6,y:a+u},{x:i+2*o/3,y:a+u}],r.label.x=r.x,r.label.y=r.y}})}s(_u,"positionSelfEdges");function wn(n,e){return dn(rn(n,e),Number)}s(wn,"selectNumberAttrs");function _n(n){var e={};return h(n,function(r,t){e[t.toLowerCase()]=r}),e}s(_n,"canonicalize");export{L as G,E as a,Z as b,qi as d,h as f,b as h,Gr as i,Iu as l,_ as m,rn as p,k as r,Un as u};
//# sourceMappingURL=layout-06a9841d.js.map
